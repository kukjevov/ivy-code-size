/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { PLATFORM_ID, Inject, Optional, Injectable } from '@angular/core';
import { isPlatformBrowser } from '@angular/common';
import { isBlank } from '@asseco/common';
import { SERVER_COOKIE_HEADER } from '../../types/tokens';
import * as i0 from "@angular/core";
import * as i1 from "../../types/tokens";
/**
 * Class that is used as wrapper for working with cookies
 */
var CookieService = /** @class */ (function () {
    //######################### constructor #########################
    function CookieService(platformId, _serverCookies) {
        this._serverCookies = _serverCookies;
        //######################### private fields #########################
        /**
         * Indication that current code is running in browser
         */
        this._isBrowser = false;
        this._isBrowser = isPlatformBrowser(platformId);
    }
    //######################### public methods #########################
    /**
     * Retrieves a single cookie by it's name
     *
     * @param name Identification of the Cookie
     * @returns The Cookie's value
     */
    //######################### public methods #########################
    /**
     * Retrieves a single cookie by it's name
     *
     * @param {?} name Identification of the Cookie
     * @return {?} The Cookie's value
     */
    CookieService.prototype.getCookie = 
    //######################### public methods #########################
    /**
     * Retrieves a single cookie by it's name
     *
     * @param {?} name Identification of the Cookie
     * @return {?} The Cookie's value
     */
    function (name) {
        if (!this._isBrowser && isBlank(this._serverCookies)) {
            return null;
        }
        name = encodeURIComponent(name);
        /** @type {?} */
        var regexp = new RegExp('(?:^' + name + '|;\\s*' + name + ')=(.*?)(?:;|$)', 'g');
        /** @type {?} */
        var result;
        if (isBlank(this._serverCookies)) {
            result = regexp.exec(document.cookie);
        }
        else {
            result = regexp.exec(this._serverCookies);
        }
        return (result === null) ? null : JSON.parse(decodeURIComponent(result[1]));
    };
    /**
     * Save the Cookie
     *
     * @param name Cookie's identification
     * @param value Cookie's value
     * @param expires Cookie's expiration date in days from now. If it's undefined the cookie is a session Cookie
     * @param path Path relative to the domain where the cookie should be avaiable. Default /
     * @param domain Domain where the cookie should be avaiable. Default current domain
     */
    /**
     * Save the Cookie
     *
     * @param {?} name Cookie's identification
     * @param {?} value Cookie's value
     * @param {?=} expires Cookie's expiration date in days from now. If it's undefined the cookie is a session Cookie
     * @param {?=} path Path relative to the domain where the cookie should be avaiable. Default /
     * @param {?=} domain Domain where the cookie should be avaiable. Default current domain
     * @return {?}
     */
    CookieService.prototype.setCookie = /**
     * Save the Cookie
     *
     * @param {?} name Cookie's identification
     * @param {?} value Cookie's value
     * @param {?=} expires Cookie's expiration date in days from now. If it's undefined the cookie is a session Cookie
     * @param {?=} path Path relative to the domain where the cookie should be avaiable. Default /
     * @param {?=} domain Domain where the cookie should be avaiable. Default current domain
     * @return {?}
     */
    function (name, value, expires, path, domain) {
        if (!this._isBrowser) {
            return;
        }
        /** @type {?} */
        var cookieStr = encodeURIComponent(name) + '=' + encodeURIComponent(JSON.stringify(value)) + ';';
        if (expires) {
            /** @type {?} */
            var dtExpires = new Date(new Date().getTime() + expires * 1000 * 60 * 60 * 24);
            cookieStr += 'expires=' + dtExpires.toUTCString() + ';';
        }
        if (path) {
            cookieStr += 'path=' + path + ';';
        }
        if (domain) {
            cookieStr += 'domain=' + domain + ';';
        }
        document.cookie = cookieStr;
    };
    /**
     * Removes specified Cookie
     *
     * @param name Cookie's identification
     * @param path Path relative to the domain where the cookie should be avaiable. Default /
     * @param domain Domain where the cookie should be avaiable. Default current domain
     */
    /**
     * Removes specified Cookie
     *
     * @param {?} name Cookie's identification
     * @param {?=} path Path relative to the domain where the cookie should be avaiable. Default /
     * @param {?=} domain Domain where the cookie should be avaiable. Default current domain
     * @return {?}
     */
    CookieService.prototype.deleteCookie = /**
     * Removes specified Cookie
     *
     * @param {?} name Cookie's identification
     * @param {?=} path Path relative to the domain where the cookie should be avaiable. Default /
     * @param {?=} domain Domain where the cookie should be avaiable. Default current domain
     * @return {?}
     */
    function (name, path, domain) {
        if (!this._isBrowser) {
            return;
        }
        // If the cookie exists
        if (this.getCookie(name)) {
            this.setCookie(name, '', -1, path, domain);
        }
    };
    CookieService.decorators = [
        { type: Injectable, args: [{ providedIn: 'root' },] }
    ];
    /** @nocollapse */
    CookieService.ctorParameters = function () { return [
        { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] },
        { type: String, decorators: [{ type: Optional }, { type: Inject, args: [SERVER_COOKIE_HEADER,] }] }
    ]; };
    /** @nocollapse */ CookieService.ngInjectableDef = i0.defineInjectable({ factory: function CookieService_Factory() { return new CookieService(i0.inject(i0.PLATFORM_ID), i0.inject(i1.SERVER_COOKIE_HEADER, 8)); }, token: CookieService, providedIn: "root" });
    return CookieService;
}());
export { CookieService };
if (false) {
    /**
     * Indication that current code is running in browser
     * @type {?}
     * @private
     */
    CookieService.prototype._isBrowser;
    /**
     * @type {?}
     * @private
     */
    CookieService.prototype._serverCookies;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29va2llcy5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3NlcnZpY2VzL2Nvb2tpZXMvY29va2llcy5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUMsV0FBVyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQ3hFLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLGlCQUFpQixDQUFDO0FBQ2xELE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUV2QyxPQUFPLEVBQUMsb0JBQW9CLEVBQUMsTUFBTSxvQkFBb0IsQ0FBQzs7Ozs7O0FBS3hEO0lBVUksaUVBQWlFO0lBQ2pFLHVCQUFpQyxVQUFrQixFQUNXLGNBQXNCO1FBQXRCLG1CQUFjLEdBQWQsY0FBYyxDQUFROzs7OztRQUo1RSxlQUFVLEdBQVksS0FBSyxDQUFDO1FBTWhDLElBQUksQ0FBQyxVQUFVLEdBQUcsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDcEQsQ0FBQztJQUVELG9FQUFvRTtJQUVwRTs7Ozs7T0FLRzs7Ozs7Ozs7SUFDSSxpQ0FBUzs7Ozs7Ozs7SUFBaEIsVUFBaUIsSUFBWTtRQUV6QixJQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxFQUNuRDtZQUNJLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFFRCxJQUFJLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLENBQUM7O1lBRTVCLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsSUFBSSxHQUFHLFFBQVEsR0FBRyxJQUFJLEdBQUcsZ0JBQWdCLEVBQUUsR0FBRyxDQUFDOztZQUM1RSxNQUFNO1FBRVYsSUFBRyxPQUFPLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxFQUMvQjtZQUNJLE1BQU0sR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUN6QzthQUVEO1lBQ0ksTUFBTSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQzdDO1FBRUQsT0FBTyxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEYsQ0FBQztJQUVEOzs7Ozs7OztPQVFHOzs7Ozs7Ozs7OztJQUNJLGlDQUFTOzs7Ozs7Ozs7O0lBQWhCLFVBQWlCLElBQVksRUFBRSxLQUFVLEVBQUUsT0FBZ0IsRUFBRSxJQUFhLEVBQUUsTUFBZTtRQUV2RixJQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFDbkI7WUFDSSxPQUFPO1NBQ1Y7O1lBRUcsU0FBUyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsR0FBRztRQUVoRyxJQUFJLE9BQU8sRUFDWDs7Z0JBQ1EsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsT0FBTyxHQUFHLElBQUksR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQztZQUM5RSxTQUFTLElBQUksVUFBVSxHQUFHLFNBQVMsQ0FBQyxXQUFXLEVBQUUsR0FBRyxHQUFHLENBQUM7U0FDM0Q7UUFFRCxJQUFJLElBQUksRUFDUjtZQUNJLFNBQVMsSUFBSSxPQUFPLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQztTQUNyQztRQUVELElBQUksTUFBTSxFQUNWO1lBQ0ksU0FBUyxJQUFJLFNBQVMsR0FBRyxNQUFNLEdBQUcsR0FBRyxDQUFDO1NBQ3pDO1FBRUQsUUFBUSxDQUFDLE1BQU0sR0FBRyxTQUFTLENBQUM7SUFDaEMsQ0FBQztJQUVEOzs7Ozs7T0FNRzs7Ozs7Ozs7O0lBQ0ksb0NBQVk7Ozs7Ozs7O0lBQW5CLFVBQW9CLElBQVksRUFBRSxJQUFhLEVBQUUsTUFBZTtRQUU1RCxJQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFDbkI7WUFDSSxPQUFPO1NBQ1Y7UUFFRCx1QkFBdUI7UUFDdkIsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUN4QjtZQUNJLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7U0FDOUM7SUFDTCxDQUFDOztnQkF6R0osVUFBVSxTQUFDLEVBQUMsVUFBVSxFQUFFLE1BQU0sRUFBQzs7OztnQkFXaUIsTUFBTSx1QkFBdEMsTUFBTSxTQUFDLFdBQVc7NkNBQ2xCLFFBQVEsWUFBSSxNQUFNLFNBQUMsb0JBQW9COzs7d0JBckJ4RDtDQW1IQyxBQTFHRCxJQTBHQztTQXpHWSxhQUFhOzs7Ozs7O0lBT3RCLG1DQUFvQzs7Ozs7SUFJeEIsdUNBQXdFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtQTEFURk9STV9JRCwgSW5qZWN0LCBPcHRpb25hbCwgSW5qZWN0YWJsZX0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7aXNQbGF0Zm9ybUJyb3dzZXJ9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7aXNCbGFua30gZnJvbSAnQGFzc2Vjby9jb21tb24nO1xyXG5cclxuaW1wb3J0IHtTRVJWRVJfQ09PS0lFX0hFQURFUn0gZnJvbSAnLi4vLi4vdHlwZXMvdG9rZW5zJztcclxuXHJcbi8qKlxyXG4gKiBDbGFzcyB0aGF0IGlzIHVzZWQgYXMgd3JhcHBlciBmb3Igd29ya2luZyB3aXRoIGNvb2tpZXNcclxuICovXHJcbkBJbmplY3RhYmxlKHtwcm92aWRlZEluOiAncm9vdCd9KVxyXG5leHBvcnQgY2xhc3MgQ29va2llU2VydmljZVxyXG57XHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHJpdmF0ZSBmaWVsZHMgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5kaWNhdGlvbiB0aGF0IGN1cnJlbnQgY29kZSBpcyBydW5uaW5nIGluIGJyb3dzZXJcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfaXNCcm93c2VyOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIGNvbnN0cnVjdG9yICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuICAgIGNvbnN0cnVjdG9yKEBJbmplY3QoUExBVEZPUk1fSUQpIHBsYXRmb3JtSWQ6IE9iamVjdCxcclxuICAgICAgICAgICAgICAgIEBPcHRpb25hbCgpIEBJbmplY3QoU0VSVkVSX0NPT0tJRV9IRUFERVIpIHByaXZhdGUgX3NlcnZlckNvb2tpZXM6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICB0aGlzLl9pc0Jyb3dzZXIgPSBpc1BsYXRmb3JtQnJvd3NlcihwbGF0Zm9ybUlkKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHVibGljIG1ldGhvZHMgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmVzIGEgc2luZ2xlIGNvb2tpZSBieSBpdCdzIG5hbWVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBJZGVudGlmaWNhdGlvbiBvZiB0aGUgQ29va2llXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgQ29va2llJ3MgdmFsdWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldENvb2tpZShuYW1lOiBzdHJpbmcpOiBhbnlcclxuICAgIHtcclxuICAgICAgICBpZighdGhpcy5faXNCcm93c2VyICYmIGlzQmxhbmsodGhpcy5fc2VydmVyQ29va2llcykpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG5hbWUgPSBlbmNvZGVVUklDb21wb25lbnQobmFtZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHJlZ2V4cCA9IG5ldyBSZWdFeHAoJyg/Ol4nICsgbmFtZSArICd8O1xcXFxzKicgKyBuYW1lICsgJyk9KC4qPykoPzo7fCQpJywgJ2cnKTtcclxuICAgICAgICBsZXQgcmVzdWx0O1xyXG5cclxuICAgICAgICBpZihpc0JsYW5rKHRoaXMuX3NlcnZlckNvb2tpZXMpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVnZXhwLmV4ZWMoZG9jdW1lbnQuY29va2llKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVnZXhwLmV4ZWModGhpcy5fc2VydmVyQ29va2llcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiAocmVzdWx0ID09PSBudWxsKSA/IG51bGwgOiBKU09OLnBhcnNlKGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRbMV0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNhdmUgdGhlIENvb2tpZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIENvb2tpZSdzIGlkZW50aWZpY2F0aW9uXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgQ29va2llJ3MgdmFsdWVcclxuICAgICAqIEBwYXJhbSBleHBpcmVzIENvb2tpZSdzIGV4cGlyYXRpb24gZGF0ZSBpbiBkYXlzIGZyb20gbm93LiBJZiBpdCdzIHVuZGVmaW5lZCB0aGUgY29va2llIGlzIGEgc2Vzc2lvbiBDb29raWVcclxuICAgICAqIEBwYXJhbSBwYXRoIFBhdGggcmVsYXRpdmUgdG8gdGhlIGRvbWFpbiB3aGVyZSB0aGUgY29va2llIHNob3VsZCBiZSBhdmFpYWJsZS4gRGVmYXVsdCAvXHJcbiAgICAgKiBAcGFyYW0gZG9tYWluIERvbWFpbiB3aGVyZSB0aGUgY29va2llIHNob3VsZCBiZSBhdmFpYWJsZS4gRGVmYXVsdCBjdXJyZW50IGRvbWFpblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0Q29va2llKG5hbWU6IHN0cmluZywgdmFsdWU6IGFueSwgZXhwaXJlcz86IG51bWJlciwgcGF0aD86IHN0cmluZywgZG9tYWluPzogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGlmKCF0aGlzLl9pc0Jyb3dzZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY29va2llU3RyID0gZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHZhbHVlKSkgKyAnOyc7XHJcblxyXG4gICAgICAgIGlmIChleHBpcmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGR0RXhwaXJlcyA9IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgZXhwaXJlcyAqIDEwMDAgKiA2MCAqIDYwICogMjQpO1xyXG4gICAgICAgICAgICBjb29raWVTdHIgKz0gJ2V4cGlyZXM9JyArIGR0RXhwaXJlcy50b1VUQ1N0cmluZygpICsgJzsnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAocGF0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvb2tpZVN0ciArPSAncGF0aD0nICsgcGF0aCArICc7JztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGRvbWFpbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvb2tpZVN0ciArPSAnZG9tYWluPScgKyBkb21haW4gKyAnOyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWVTdHI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIHNwZWNpZmllZCBDb29raWVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBDb29raWUncyBpZGVudGlmaWNhdGlvblxyXG4gICAgICogQHBhcmFtIHBhdGggUGF0aCByZWxhdGl2ZSB0byB0aGUgZG9tYWluIHdoZXJlIHRoZSBjb29raWUgc2hvdWxkIGJlIGF2YWlhYmxlLiBEZWZhdWx0IC9cclxuICAgICAqIEBwYXJhbSBkb21haW4gRG9tYWluIHdoZXJlIHRoZSBjb29raWUgc2hvdWxkIGJlIGF2YWlhYmxlLiBEZWZhdWx0IGN1cnJlbnQgZG9tYWluXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZWxldGVDb29raWUobmFtZTogc3RyaW5nLCBwYXRoPzogc3RyaW5nLCBkb21haW4/OiBzdHJpbmcpXHJcbiAgICB7XHJcbiAgICAgICAgaWYoIXRoaXMuX2lzQnJvd3NlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIHRoZSBjb29raWUgZXhpc3RzXHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0Q29va2llKG5hbWUpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRDb29raWUobmFtZSwgJycsIC0xLCBwYXRoLCBkb21haW4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdfQ==
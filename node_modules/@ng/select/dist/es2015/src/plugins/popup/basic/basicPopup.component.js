/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ChangeDetectionStrategy, ChangeDetectorRef, Inject, Optional, ElementRef, EventEmitter, ViewChildren, QueryList } from '@angular/core';
import { DOCUMENT } from '@angular/common';
import { extend, isDescendant } from '@asseco/common';
import { NG_SELECT_PLUGIN_INSTANCES } from '../../../components/select/types';
import { POPUP_OPTIONS } from '../types';
import { NORMAL_STATE } from '../../normalState/types';
import { KEYBOARD_HANDLER } from '../../keyboardHandler/types';
import { VALUE_HANDLER } from '../../valueHandler/types';
/**
 * Default options for popup
 * \@internal
 * @type {?}
 */
const defaultOptions = {
    cssClasses: {
        optionChecked: 'fa fa-check',
        optionItemDiv: 'option-item',
        optionItemTextDiv: 'option-item-text',
        popupDiv: 'popup-div'
    },
    visible: false
};
/**
 * Component used for rendering basic popup with options
 */
export class BasicPopupComponent {
    //######################### constructor #########################
    /**
     * @param {?} ngSelectPlugins
     * @param {?} pluginElement
     * @param {?} _changeDetector
     * @param {?=} options
     * @param {?=} _document
     */
    constructor(ngSelectPlugins, pluginElement, _changeDetector, options, _document) {
        this.ngSelectPlugins = ngSelectPlugins;
        this.pluginElement = pluginElement;
        this._changeDetector = _changeDetector;
        this._document = _document;
        /**
         * Indication whether is popup visible
         */
        this._popupVisible = false;
        /**
         * Occurs when user clicks on option, clicked options is passed as argument
         */
        this.optionClick = new EventEmitter();
        /**
         * Occurs when visibility of popup has changed
         */
        this.visibilityChange = new EventEmitter();
        /**
         * Handles click outside of select element
         * @param event Mouse event object
         */
        this._handleClickOutside = (/**
         * @param {?} event
         * @return {?}
         */
        (event) => {
            if (this.selectElement != event.target && !isDescendant(this.selectElement, (/** @type {?} */ (event.target)))) {
                this.togglePopup();
            }
        });
        /**
         * Handles visibility change
         */
        this._handleVisibilityChange = (/**
         * @param {?} visible
         * @return {?}
         */
        (visible) => {
            if (this.options.visible != visible) {
                this.options.visible = visible;
                this._changeDetector.detectChanges();
            }
        });
        this._options = extend(true, {}, defaultOptions, options);
    }
    //######################### public properties - implementation of BasicPopup #########################
    /**
     * Options for NgSelect plugin
     * @return {?}
     */
    get options() {
        return this._options;
    }
    /**
     * @param {?} options
     * @return {?}
     */
    set options(options) {
        this._options = extend(true, this._options, options);
    }
    /**
     * Html element that represents popup itself
     * @return {?}
     */
    get popupElement() {
        /** @type {?} */
        let ref = this.popupElementChildren.first;
        if (!ref) {
            return null;
        }
        return ref.nativeElement;
    }
    //######################### public methods - implementation of AfterViewInit #########################
    /**
     * Called when view was initialized
     * @return {?}
     */
    ngAfterViewInit() {
        this.popupElementChildren.changes.subscribe((/**
         * @return {?}
         */
        () => {
            if (!!this.popupElementChildren.first == this._popupVisible) {
                return;
            }
            //handle click outside
            if (this.popupElementChildren.first) {
                this._document.addEventListener('mouseup', this._handleClickOutside);
            }
            //unregister handle click outside
            else {
                this._document.removeEventListener('mouseup', this._handleClickOutside);
            }
            this._popupVisible = !!this.popupElementChildren.first;
            this.visibilityChange.emit();
        }));
    }
    //######################### public methods - implementation of OnDestroy #########################
    /**
     * Called when component is destroyed
     * @return {?}
     */
    ngOnDestroy() {
        if (this._optionsChangeSubscription) {
            this._optionsChangeSubscription.unsubscribe();
            this._optionsChangeSubscription = null;
        }
        if (this._clickSubscription) {
            this._clickSubscription.unsubscribe();
            this._clickSubscription = null;
        }
        if (this._khPopupVisibilityRequestSubscription) {
            this._khPopupVisibilityRequestSubscription.unsubscribe();
            this._khPopupVisibilityRequestSubscription = null;
        }
        if (this._vhPopupVisibilityRequestSubscription) {
            this._vhPopupVisibilityRequestSubscription.unsubscribe();
            this._vhPopupVisibilityRequestSubscription = null;
        }
        this._document.removeEventListener('mouseup', this._handleClickOutside);
    }
    //######################### public methods - implementation of BasicPopup #########################
    /**
     * Initialize plugin, to be ready to use, initialize communication with other plugins
     * @return {?}
     */
    initialize() {
        if (this._optionsGatherer && this._optionsGatherer != this.optionsGatherer) {
            this._optionsChangeSubscription.unsubscribe();
            this._optionsChangeSubscription = null;
            this._optionsGatherer = null;
        }
        if (!this._optionsGatherer) {
            this._optionsGatherer = this.optionsGatherer;
            this._optionsChangeSubscription = this._optionsGatherer.availableOptionsChange.subscribe((/**
             * @return {?}
             */
            () => this.loadOptions()));
        }
        /** @type {?} */
        let normalState = (/** @type {?} */ (this.ngSelectPlugins[NORMAL_STATE]));
        if (this._normalState && this._normalState != normalState) {
            this._clickSubscription.unsubscribe();
            this._clickSubscription = null;
            this._normalState = null;
        }
        if (!this._normalState) {
            this._normalState = normalState;
            this._clickSubscription = this._normalState.click.subscribe((/**
             * @return {?}
             */
            () => this.togglePopup()));
        }
        /** @type {?} */
        let keyboardHandler = (/** @type {?} */ (this.ngSelectPlugins[KEYBOARD_HANDLER]));
        if (this._keyboardHandler && this._keyboardHandler != keyboardHandler) {
            this._khPopupVisibilityRequestSubscription.unsubscribe();
            this._khPopupVisibilityRequestSubscription = null;
            this._keyboardHandler = null;
        }
        if (!this._keyboardHandler) {
            this._keyboardHandler = keyboardHandler;
            this._khPopupVisibilityRequestSubscription = this._keyboardHandler.popupVisibilityRequest.subscribe(this._handleVisibilityChange);
        }
        /** @type {?} */
        let valueHandler = (/** @type {?} */ (this.ngSelectPlugins[VALUE_HANDLER]));
        if (this._valueHandler && this._valueHandler != valueHandler) {
            this._vhPopupVisibilityRequestSubscription.unsubscribe();
            this._vhPopupVisibilityRequestSubscription = null;
            this._valueHandler = null;
        }
        if (!this._valueHandler) {
            this._valueHandler = valueHandler;
            this._vhPopupVisibilityRequestSubscription = this._valueHandler.popupVisibilityRequest.subscribe(this._handleVisibilityChange);
        }
        this.loadOptions();
    }
    /**
     * Initialize plugin options, all operations required to be done with plugin options are handled here
     * @return {?}
     */
    initOptions() {
    }
    /**
     * Explicitly runs invalidation of content (change detection)
     * @return {?}
     */
    invalidateVisuals() {
        this._changeDetector.detectChanges();
    }
    //######################### protected methods #########################
    /**
     * Loads options
     * @protected
     * @return {?}
     */
    loadOptions() {
        this.selectOptions = this._optionsGatherer.availableOptions;
        this._changeDetector.detectChanges();
    }
    /**
     * Toggles popup visibility
     * @protected
     * @return {?}
     */
    togglePopup() {
        this.options.visible = !this.options.visible;
        this._changeDetector.detectChanges();
    }
}
BasicPopupComponent.decorators = [
    { type: Component, args: [{
                selector: "div.ng-select-popup",
                template: "<ng-template #defaultOptionTextLook let-option>{{option?.text}}</ng-template>\r\n\r\n<div #popupDiv \r\n     *ngIf=\"options?.visible\"\r\n     [ngClass]=\"options?.cssClasses?.popupDiv\">\r\n    <ng-content></ng-content>\r\n\r\n    <div *ngFor=\"let option of selectOptions\"\r\n         [ngClass]=\"options?.cssClasses?.optionItemDiv\"\r\n         [class.selected]=\"option?.selected\"\r\n         [class.active]=\"option?.active\"\r\n         (click)=\"optionClick?.emit(option)\">\r\n        <div [ngClass]=\"options?.cssClasses?.optionItemTextDiv\">\r\n            <ng-container *ngTemplateOutlet=\"templateGatherer?.optionTemplate || defaultOptionTextLook; context: {$implicit: option, popup: this}\"></ng-container>\r\n        </div>\r\n\r\n        <div *ngIf=\"option?.selected && options?.multiple\" [ngClass]=\"options?.cssClasses?.optionChecked\"></div>\r\n    </div>\r\n</div>",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [`.popup-div
        {
            position: absolute;
            z-index: 250;
            background-color: #FFFFFF;
            border-radius: 4px;
            border: 1px solid #BBBBBB;
            overflow: auto;
            min-width: 100%;
            padding: 5px 0;
            box-shadow: 0 6px 12px rgba(0,0,0,.175);
            scrollbar-width: thin;
        }

        .popup-div::-webkit-scrollbar-thumb 
        {
            background-color: #cdcdcd;
        }
        
        .popup-div::-webkit-scrollbar 
        {
            width: 6px;
            background-color: #f0f0f0;
        }

        .option-item
        {
            padding: 3px 12px;
            display: flex;
            align-items: center;
        }

        .option-item .option-item-text
        {
            min-width: 0;
            flex: 1;
            white-space: nowrap;
        }

        .option-item .option-item-text:hover
        {
            cursor: pointer;
        }

        .option-item .fa-check
        {
            margin-left: 8px;
        }

        .option-item.selected,
        .option-item.active
        {
            background-color: #E8E8E8;
            background-image: linear-gradient(to bottom,#F5F5F5 0,#E8E8E8 100%);
        }

        .option-item:hover
        {
            background-color: #E8E8E8;
            background-image: linear-gradient(to bottom,#F5F5F5 0,#E8E8E8 100%);
            cursor: pointer;
        }`]
            }] }
];
/** @nocollapse */
BasicPopupComponent.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Inject, args: [NG_SELECT_PLUGIN_INSTANCES,] }, { type: Optional }] },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: undefined, decorators: [{ type: Inject, args: [POPUP_OPTIONS,] }, { type: Optional }] },
    { type: HTMLDocument, decorators: [{ type: Inject, args: [DOCUMENT,] }] }
];
BasicPopupComponent.propDecorators = {
    popupElementChildren: [{ type: ViewChildren, args: ['popupDiv',] }]
};
if (false) {
    /**
     * Options for NgSelect plugin
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._options;
    /**
     * Instance of previous options gatherer, that is used for obtaining available options
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._optionsGatherer;
    /**
     * Subscription for changes of options in options gatherer
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._optionsChangeSubscription;
    /**
     * Subscription for click event on normal state
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._clickSubscription;
    /**
     * Subscription for popup visibility request from keyboard handler
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._khPopupVisibilityRequestSubscription;
    /**
     * Subscription for popup visibility request from value handler
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._vhPopupVisibilityRequestSubscription;
    /**
     * Normal state that is displayed
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._normalState;
    /**
     * Keyboard handler that is used
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._keyboardHandler;
    /**
     * Value handler that is used
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._valueHandler;
    /**
     * Indication whether is popup visible
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._popupVisible;
    /**
     * Instance of options gatherer, that is used for obtaining available options
     * @type {?}
     */
    BasicPopupComponent.prototype.optionsGatherer;
    /**
     * Gatherer used for obtaining custom templates
     * @type {?}
     */
    BasicPopupComponent.prototype.templateGatherer;
    /**
     * HTML element that represents select itself
     * @type {?}
     */
    BasicPopupComponent.prototype.selectElement;
    /**
     * Occurs when user clicks on option, clicked options is passed as argument
     * @type {?}
     */
    BasicPopupComponent.prototype.optionClick;
    /**
     * Occurs when visibility of popup has changed
     * @type {?}
     */
    BasicPopupComponent.prototype.visibilityChange;
    /**
     * Array of select options available
     * \@internal
     * @type {?}
     */
    BasicPopupComponent.prototype.selectOptions;
    /**
     * Watch for visibility of popup div element
     * \@internal
     * @type {?}
     */
    BasicPopupComponent.prototype.popupElementChildren;
    /**
     * Handles click outside of select element
     * \@param event Mouse event object
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._handleClickOutside;
    /**
     * Handles visibility change
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._handleVisibilityChange;
    /** @type {?} */
    BasicPopupComponent.prototype.ngSelectPlugins;
    /** @type {?} */
    BasicPopupComponent.prototype.pluginElement;
    /**
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._changeDetector;
    /**
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._document;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaWNQb3B1cC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvcGx1Z2lucy9wb3B1cC9iYXNpYy9iYXNpY1BvcHVwLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSx1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBYSxZQUFZLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBZ0IsTUFBTSxlQUFlLENBQUM7QUFDbkwsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLGlCQUFpQixDQUFDO0FBQ3pDLE9BQU8sRUFBQyxNQUFNLEVBQUUsWUFBWSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFNcEQsT0FBTyxFQUFDLDBCQUEwQixFQUFDLE1BQU0sa0NBQWtDLENBQUM7QUFDNUUsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLFVBQVUsQ0FBQztBQUd2QyxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFFckQsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sNkJBQTZCLENBQUM7QUFFN0QsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLDBCQUEwQixDQUFDOzs7Ozs7TUFNakQsY0FBYyxHQUNwQjtJQUNJLFVBQVUsRUFDVjtRQUNJLGFBQWEsRUFBRSxhQUFhO1FBQzVCLGFBQWEsRUFBRSxhQUFhO1FBQzVCLGlCQUFpQixFQUFFLGtCQUFrQjtRQUNyQyxRQUFRLEVBQUUsV0FBVztLQUN4QjtJQUNELE9BQU8sRUFBRSxLQUFLO0NBQ2pCOzs7O0FBNEVELE1BQU0sT0FBTyxtQkFBbUI7Ozs7Ozs7OztJQThINUIsWUFBbUUsZUFBd0MsRUFDeEYsYUFBeUIsRUFDdEIsZUFBa0MsRUFDVCxPQUEyQixFQUNsQyxTQUF3QjtRQUpHLG9CQUFlLEdBQWYsZUFBZSxDQUF5QjtRQUN4RixrQkFB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Q0E2TzVDLE1BQU0sU0FBQyxhQUFhLGNBQUcsUUFBUTtZQUNRLFlBQVksdUJBQW5ELE1BQU0sU0FBQyxRQUFROzs7bUNBUjNCLFlBQVksU0FBQyxVQUFVOzs7Ozs7OztJQW5IeEIsdUNBQXNDOzs7Ozs7SUFLdEMsK0NBQWlEOzs7Ozs7SUFLakQseURBQW1EOzs7Ozs7SUFLbkQsaURBQTJDOzs7Ozs7SUFLM0Msb0VBQThEOzs7Ozs7SUFLOUQsb0VBQThEOzs7Ozs7SUFLOUQsMkNBQW9DOzs7Ozs7SUFLcEMsK0NBQTRDOzs7Ozs7SUFLNUMsNENBQTJDOzs7Ozs7SUFLM0MsNENBQXlDOzs7OztJQW1CekMsOENBQTZDOzs7OztJQUs3QywrQ0FBMEM7Ozs7O0lBSzFDLDRDQUFrQzs7Ozs7SUFLbEMsMENBQWdHOzs7OztJQUtoRywrQ0FBdUU7Ozs7OztJQXVCdkUsNENBQTZDOzs7Ozs7SUFRN0MsbURBQ2dFOzs7Ozs7O0lBK0xoRSxrREFNQzs7Ozs7O0lBS0Qsc0RBT0U7O0lBOU1VLDhDQUErRjs7SUFDL0YsNENBQWdDOzs7OztJQUNoQyw4Q0FBNEM7Ozs7O0lBRTVDLHdDQUFvRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q29tcG9uZW50LCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIEluamVjdCwgT3B0aW9uYWwsIEVsZW1lbnRSZWYsIE9uRGVzdHJveSwgRXZlbnRFbWl0dGVyLCBWaWV3Q2hpbGRyZW4sIFF1ZXJ5TGlzdCwgQWZ0ZXJWaWV3SW5pdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7RE9DVU1FTlR9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7ZXh0ZW5kLCBpc0Rlc2NlbmRhbnR9IGZyb20gJ0Bhc3NlY28vY29tbW9uJztcclxuaW1wb3J0IHtTdWJzY3JpcHRpb259IGZyb20gJ3J4anMnO1xyXG5cclxuaW1wb3J0IHtCYXNpY1BvcHVwT3B0aW9ucywgQmFzaWNQb3B1cH0gZnJvbSAnLi9iYXNpY1BvcHVwLmludGVyZmFjZSc7XHJcbmltcG9ydCB7TmdTZWxlY3RQbHVnaW5HZW5lcmljLCBPcHRpb25zR2F0aGVyZXIsIFRlbXBsYXRlR2F0aGVyZXJ9IGZyb20gJy4uLy4uLy4uL21pc2MnO1xyXG5pbXBvcnQge05nU2VsZWN0UGx1Z2luSW5zdGFuY2VzfSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL3NlbGVjdCc7XHJcbmltcG9ydCB7TkdfU0VMRUNUX1BMVUdJTl9JTlNUQU5DRVN9IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvc2VsZWN0L3R5cGVzJztcclxuaW1wb3J0IHtQT1BVUF9PUFRJT05TfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7ybVOZ1NlbGVjdE9wdGlvbiwgTmdTZWxlY3RPcHRpb259IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvb3B0aW9uJztcclxuaW1wb3J0IHtOb3JtYWxTdGF0ZX0gZnJvbSAnLi4vLi4vbm9ybWFsU3RhdGUnO1xyXG5pbXBvcnQge05PUk1BTF9TVEFURX0gZnJvbSAnLi4vLi4vbm9ybWFsU3RhdGUvdHlwZXMnO1xyXG5pbXBvcnQge0tleWJvYXJkSGFuZGxlcn0gZnJvbSAnLi4vLi4va2V5Ym9hcmRIYW5kbGVyJztcclxuaW1wb3J0IHtLRVlCT0FSRF9IQU5ETEVSfSBmcm9tICcuLi8uLi9rZXlib2FyZEhhbmRsZXIvdHlwZXMnO1xyXG5pbXBvcnQge1ZhbHVlSGFuZGxlcn0gZnJvbSAnLi4vLi4vdmFsdWVIYW5kbGVyJztcclxuaW1wb3J0IHtWQUxVRV9IQU5ETEVSfSBmcm9tICcuLi8uLi92YWx1ZUhhbmRsZXIvdHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIERlZmF1bHQgb3B0aW9ucyBmb3IgcG9wdXBcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0T3B0aW9uczogQmFzaWNQb3B1cE9wdGlvbnMgPVxyXG57XHJcbiAgICBjc3NDbGFzc2VzOlxyXG4gICAge1xyXG4gICAgICAgIG9wdGlvbkNoZWNrZWQ6ICdmYSBmYS1jaGVjaycsXHJcbiAgICAgICAgb3B0aW9uSXRlbURpdjogJ29wdGlvbi1pdGVtJyxcclxuICAgICAgICBvcHRpb25JdGVtVGV4dERpdjogJ29wdGlvbi1pdGVtLXRleHQnLFxyXG4gICAgICAgIHBvcHVwRGl2OiAncG9wdXAtZGl2J1xyXG4gICAgfSxcclxuICAgIHZpc2libGU6IGZhbHNlXHJcbn07XHJcblxyXG4vKipcclxuICogQ29tcG9uZW50IHVzZWQgZm9yIHJlbmRlcmluZyBiYXNpYyBwb3B1cCB3aXRoIG9wdGlvbnNcclxuICovXHJcbkBDb21wb25lbnQoXHJcbntcclxuICAgIHNlbGVjdG9yOiBcImRpdi5uZy1zZWxlY3QtcG9wdXBcIixcclxuICAgIHRlbXBsYXRlVXJsOiAnYmFzaWNQb3B1cC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICAgIHN0eWxlczpcclxuICAgIFtcclxuICAgICAgICBgLnBvcHVwLWRpdlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICB6LWluZGV4OiAyNTA7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI0JCQkJCQjtcclxuICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XHJcbiAgICAgICAgICAgIG1pbi13aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgcGFkZGluZzogNXB4IDA7XHJcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNnB4IDEycHggcmdiYSgwLDAsMCwuMTc1KTtcclxuICAgICAgICAgICAgc2Nyb2xsYmFyLXdpZHRoOiB0aGluO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLnBvcHVwLWRpdjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2RjZGNkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAucG9wdXAtZGl2Ojotd2Via2l0LXNjcm9sbGJhciBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdpZHRoOiA2cHg7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMGYwZjA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAub3B0aW9uLWl0ZW1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDNweCAxMnB4O1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLm9wdGlvbi1pdGVtIC5vcHRpb24taXRlbS10ZXh0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtaW4td2lkdGg6IDA7XHJcbiAgICAgICAgICAgIGZsZXg6IDE7XHJcbiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAub3B0aW9uLWl0ZW0gLm9wdGlvbi1pdGVtLXRleHQ6aG92ZXJcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5vcHRpb24taXRlbSAuZmEtY2hlY2tcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAub3B0aW9uLWl0ZW0uc2VsZWN0ZWQsXHJcbiAgICAgICAgLm9wdGlvbi1pdGVtLmFjdGl2ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0U4RThFODtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwjRjVGNUY1IDAsI0U4RThFOCAxMDAlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5vcHRpb24taXRlbTpob3ZlclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0U4RThFODtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwjRjVGNUY1IDAsI0U4RThFOCAxMDAlKTtcclxuICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgICAgIH1gXHJcbiAgICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBCYXNpY1BvcHVwQ29tcG9uZW50IGltcGxlbWVudHMgQmFzaWNQb3B1cCwgTmdTZWxlY3RQbHVnaW5HZW5lcmljPEJhc2ljUG9wdXBPcHRpb25zPiwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95XHJcbntcclxuICAgIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBwcm90ZWN0ZWQgZmllbGRzICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9wdGlvbnMgZm9yIE5nU2VsZWN0IHBsdWdpblxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX29wdGlvbnM6IEJhc2ljUG9wdXBPcHRpb25zO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5zdGFuY2Ugb2YgcHJldmlvdXMgb3B0aW9ucyBnYXRoZXJlciwgdGhhdCBpcyB1c2VkIGZvciBvYnRhaW5pbmcgYXZhaWxhYmxlIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIF9vcHRpb25zR2F0aGVyZXI6IE9wdGlvbnNHYXRoZXJlcjxhbnk+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaXB0aW9uIGZvciBjaGFuZ2VzIG9mIG9wdGlvbnMgaW4gb3B0aW9ucyBnYXRoZXJlclxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX29wdGlvbnNDaGFuZ2VTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmlwdGlvbiBmb3IgY2xpY2sgZXZlbnQgb24gbm9ybWFsIHN0YXRlXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBfY2xpY2tTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmlwdGlvbiBmb3IgcG9wdXAgdmlzaWJpbGl0eSByZXF1ZXN0IGZyb20ga2V5Ym9hcmQgaGFuZGxlclxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX2toUG9wdXBWaXNpYmlsaXR5UmVxdWVzdFN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaXB0aW9uIGZvciBwb3B1cCB2aXNpYmlsaXR5IHJlcXVlc3QgZnJvbSB2YWx1ZSBoYW5kbGVyXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBfdmhQb3B1cFZpc2liaWxpdHlSZXF1ZXN0U3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOb3JtYWwgc3RhdGUgdGhhdCBpcyBkaXNwbGF5ZWRcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIF9ub3JtYWxTdGF0ZTogTm9ybWFsU3RhdGU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBLZXlib2FyZCBoYW5kbGVyIHRoYXQgaXMgdXNlZFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX2tleWJvYXJkSGFuZGxlcjogS2V5Ym9hcmRIYW5kbGVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsdWUgaGFuZGxlciB0aGF0IGlzIHVzZWRcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIF92YWx1ZUhhbmRsZXI6IFZhbHVlSGFuZGxlcjxhbnk+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5kaWNhdGlvbiB3aGV0aGVyIGlzIHBvcHVwIHZpc2libGVcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIF9wb3B1cFZpc2libGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHVibGljIHByb3BlcnRpZXMgLSBpbXBsZW1lbnRhdGlvbiBvZiBCYXNpY1BvcHVwICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9wdGlvbnMgZm9yIE5nU2VsZWN0IHBsdWdpblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG9wdGlvbnMoKTogQmFzaWNQb3B1cE9wdGlvbnNcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgb3B0aW9ucyhvcHRpb25zOiBCYXNpY1BvcHVwT3B0aW9ucylcclxuICAgIHtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gZXh0ZW5kKHRydWUsIHRoaXMuX29wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5zdGFuY2Ugb2Ygb3B0aW9ucyBnYXRoZXJlciwgdGhhdCBpcyB1c2VkIGZvciBvYnRhaW5pbmcgYXZhaWxhYmxlIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9wdGlvbnNHYXRoZXJlcjogT3B0aW9uc0dhdGhlcmVyPGFueT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHYXRoZXJlciB1c2VkIGZvciBvYnRhaW5pbmcgY3VzdG9tIHRlbXBsYXRlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdGVtcGxhdGVHYXRoZXJlcjogVGVtcGxhdGVHYXRoZXJlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEhUTUwgZWxlbWVudCB0aGF0IHJlcHJlc2VudHMgc2VsZWN0IGl0c2VsZlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2VsZWN0RWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPY2N1cnMgd2hlbiB1c2VyIGNsaWNrcyBvbiBvcHRpb24sIGNsaWNrZWQgb3B0aW9ucyBpcyBwYXNzZWQgYXMgYXJndW1lbnRcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9wdGlvbkNsaWNrOiBFdmVudEVtaXR0ZXI8TmdTZWxlY3RPcHRpb248YW55Pj4gPSBuZXcgRXZlbnRFbWl0dGVyPE5nU2VsZWN0T3B0aW9uPGFueT4+KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPY2N1cnMgd2hlbiB2aXNpYmlsaXR5IG9mIHBvcHVwIGhhcyBjaGFuZ2VkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB2aXNpYmlsaXR5Q2hhbmdlOiBFdmVudEVtaXR0ZXI8dm9pZD4gPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIdG1sIGVsZW1lbnQgdGhhdCByZXByZXNlbnRzIHBvcHVwIGl0c2VsZlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHBvcHVwRWxlbWVudCgpOiBIVE1MRWxlbWVudFxyXG4gICAge1xyXG4gICAgICAgIGxldCByZWYgPSB0aGlzLnBvcHVwRWxlbWVudENoaWxkcmVuLmZpcnN0O1xyXG5cclxuICAgICAgICBpZighcmVmKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVmLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIHB1YmxpYyBwcm9wZXJ0aWVzIC0gdGVtcGxhdGUgYmluZGluZ3MgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXJyYXkgb2Ygc2VsZWN0IG9wdGlvbnMgYXZhaWxhYmxlXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNlbGVjdE9wdGlvbnM6IMm1TmdTZWxlY3RPcHRpb248YW55PltdO1xyXG5cclxuICAgIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBwdWJsaWMgcHJvcGVydGllcyAtIGNoaWxkcmVuICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdhdGNoIGZvciB2aXNpYmlsaXR5IG9mIHBvcHVwIGRpdiBlbGVtZW50XHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgQFZpZXdDaGlsZHJlbigncG9wdXBEaXYnKVxyXG4gICAgcHVibGljIHBvcHVwRWxlbWVudENoaWxkcmVuOiBRdWVyeUxpc3Q8RWxlbWVudFJlZjxIVE1MRWxlbWVudD4+O1xyXG5cclxuICAgIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBjb25zdHJ1Y3RvciAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbiAgICBjb25zdHJ1Y3RvcihASW5qZWN0KE5HX1NFTEVDVF9QTFVHSU5fSU5TVEFOQ0VTKSBAT3B0aW9uYWwoKSBwdWJsaWMgbmdTZWxlY3RQbHVnaW5zOiBOZ1NlbGVjdFBsdWdpbkluc3RhbmNlcyxcclxuICAgICAgICAgICAgICAgIHB1YmxpYyBwbHVnaW5FbGVtZW50OiBFbGVtZW50UmVmLFxyXG4gICAgICAgICAgICAgICAgcHJvdGVjdGVkIF9jaGFuZ2VEZXRlY3RvcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICAgICAgICAgICAgICBASW5qZWN0KFBPUFVQX09QVElPTlMpIEBPcHRpb25hbCgpIG9wdGlvbnM/OiBCYXNpY1BvcHVwT3B0aW9ucyxcclxuICAgICAgICAgICAgICAgIEBJbmplY3QoRE9DVU1FTlQpIHByb3RlY3RlZCBfZG9jdW1lbnQ/OiBIVE1MRG9jdW1lbnQpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IGV4dGVuZCh0cnVlLCB7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBwdWJsaWMgbWV0aG9kcyAtIGltcGxlbWVudGF0aW9uIG9mIEFmdGVyVmlld0luaXQgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHdoZW4gdmlldyB3YXMgaW5pdGlhbGl6ZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIG5nQWZ0ZXJWaWV3SW5pdCgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5wb3B1cEVsZW1lbnRDaGlsZHJlbi5jaGFuZ2VzLnN1YnNjcmliZSgoKSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoISF0aGlzLnBvcHVwRWxlbWVudENoaWxkcmVuLmZpcnN0ID09IHRoaXMuX3BvcHVwVmlzaWJsZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL2hhbmRsZSBjbGljayBvdXRzaWRlXHJcbiAgICAgICAgICAgIGlmKHRoaXMucG9wdXBFbGVtZW50Q2hpbGRyZW4uZmlyc3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9oYW5kbGVDbGlja091dHNpZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vdW5yZWdpc3RlciBoYW5kbGUgY2xpY2sgb3V0c2lkZVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9oYW5kbGVDbGlja091dHNpZGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wb3B1cFZpc2libGUgPSAhIXRoaXMucG9wdXBFbGVtZW50Q2hpbGRyZW4uZmlyc3Q7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJpbGl0eUNoYW5nZS5lbWl0KClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHVibGljIG1ldGhvZHMgLSBpbXBsZW1lbnRhdGlvbiBvZiBPbkRlc3Ryb3kgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHdoZW4gY29tcG9uZW50IGlzIGRlc3Ryb3llZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbmdPbkRlc3Ryb3koKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHRoaXMuX29wdGlvbnNDaGFuZ2VTdWJzY3JpcHRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLl9vcHRpb25zQ2hhbmdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnNDaGFuZ2VTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5fY2xpY2tTdWJzY3JpcHRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLl9jbGlja1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9jbGlja1N1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLl9raFBvcHVwVmlzaWJpbGl0eVJlcXVlc3RTdWJzY3JpcHRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLl9raFBvcHVwVmlzaWJpbGl0eVJlcXVlc3RTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgdGhpcy5fa2hQb3B1cFZpc2liaWxpdHlSZXF1ZXN0U3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMuX3ZoUG9wdXBWaXNpYmlsaXR5UmVxdWVzdFN1YnNjcmlwdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZoUG9wdXBWaXNpYmlsaXR5UmVxdWVzdFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl92aFBvcHVwVmlzaWJpbGl0eVJlcXVlc3RTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2hhbmRsZUNsaWNrT3V0c2lkZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIHB1YmxpYyBtZXRob2RzIC0gaW1wbGVtZW50YXRpb24gb2YgQmFzaWNQb3B1cCAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIHBsdWdpbiwgdG8gYmUgcmVhZHkgdG8gdXNlLCBpbml0aWFsaXplIGNvbW11bmljYXRpb24gd2l0aCBvdGhlciBwbHVnaW5zXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbml0aWFsaXplKClcclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLl9vcHRpb25zR2F0aGVyZXIgJiYgdGhpcy5fb3B0aW9uc0dhdGhlcmVyICE9IHRoaXMub3B0aW9uc0dhdGhlcmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fb3B0aW9uc0NoYW5nZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9vcHRpb25zQ2hhbmdlU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnNHYXRoZXJlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZighdGhpcy5fb3B0aW9uc0dhdGhlcmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fb3B0aW9uc0dhdGhlcmVyID0gdGhpcy5vcHRpb25zR2F0aGVyZXI7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9vcHRpb25zQ2hhbmdlU3Vic2NyaXB0aW9uID0gdGhpcy5fb3B0aW9uc0dhdGhlcmVyLmF2YWlsYWJsZU9wdGlvbnNDaGFuZ2Uuc3Vic2NyaWJlKCgpID0+IHRoaXMubG9hZE9wdGlvbnMoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbm9ybWFsU3RhdGUgPSB0aGlzLm5nU2VsZWN0UGx1Z2luc1tOT1JNQUxfU1RBVEVdIGFzIE5vcm1hbFN0YXRlO1xyXG5cclxuICAgICAgICBpZih0aGlzLl9ub3JtYWxTdGF0ZSAmJiB0aGlzLl9ub3JtYWxTdGF0ZSAhPSBub3JtYWxTdGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NsaWNrU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NsaWNrU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX25vcm1hbFN0YXRlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKCF0aGlzLl9ub3JtYWxTdGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX25vcm1hbFN0YXRlID0gbm9ybWFsU3RhdGU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jbGlja1N1YnNjcmlwdGlvbiA9IHRoaXMuX25vcm1hbFN0YXRlLmNsaWNrLnN1YnNjcmliZSgoKSA9PiB0aGlzLnRvZ2dsZVBvcHVwKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGtleWJvYXJkSGFuZGxlciA9IHRoaXMubmdTZWxlY3RQbHVnaW5zW0tFWUJPQVJEX0hBTkRMRVJdIGFzIEtleWJvYXJkSGFuZGxlcjtcclxuXHJcbiAgICAgICAgaWYodGhpcy5fa2V5Ym9hcmRIYW5kbGVyICYmIHRoaXMuX2tleWJvYXJkSGFuZGxlciAhPSBrZXlib2FyZEhhbmRsZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLl9raFBvcHVwVmlzaWJpbGl0eVJlcXVlc3RTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgdGhpcy5fa2hQb3B1cFZpc2liaWxpdHlSZXF1ZXN0U3Vic2NyaXB0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2tleWJvYXJkSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZighdGhpcy5fa2V5Ym9hcmRIYW5kbGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fa2V5Ym9hcmRIYW5kbGVyID0ga2V5Ym9hcmRIYW5kbGVyO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fa2hQb3B1cFZpc2liaWxpdHlSZXF1ZXN0U3Vic2NyaXB0aW9uID0gdGhpcy5fa2V5Ym9hcmRIYW5kbGVyLnBvcHVwVmlzaWJpbGl0eVJlcXVlc3Quc3Vic2NyaWJlKHRoaXMuX2hhbmRsZVZpc2liaWxpdHlDaGFuZ2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHZhbHVlSGFuZGxlciA9IHRoaXMubmdTZWxlY3RQbHVnaW5zW1ZBTFVFX0hBTkRMRVJdIGFzIFZhbHVlSGFuZGxlcjxhbnk+O1xyXG5cclxuICAgICAgICBpZih0aGlzLl92YWx1ZUhhbmRsZXIgJiYgdGhpcy5fdmFsdWVIYW5kbGVyICE9IHZhbHVlSGFuZGxlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZoUG9wdXBWaXNpYmlsaXR5UmVxdWVzdFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl92aFBvcHVwVmlzaWJpbGl0eVJlcXVlc3RTdWJzY3JpcHRpb24gPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fdmFsdWVIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKCF0aGlzLl92YWx1ZUhhbmRsZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLl92YWx1ZUhhbmRsZXIgPSB2YWx1ZUhhbmRsZXI7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl92aFBvcHVwVmlzaWJpbGl0eVJlcXVlc3RTdWJzY3JpcHRpb24gPSB0aGlzLl92YWx1ZUhhbmRsZXIucG9wdXBWaXNpYmlsaXR5UmVxdWVzdC5zdWJzY3JpYmUodGhpcy5faGFuZGxlVmlzaWJpbGl0eUNoYW5nZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmxvYWRPcHRpb25zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIHBsdWdpbiBvcHRpb25zLCBhbGwgb3BlcmF0aW9ucyByZXF1aXJlZCB0byBiZSBkb25lIHdpdGggcGx1Z2luIG9wdGlvbnMgYXJlIGhhbmRsZWQgaGVyZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaW5pdE9wdGlvbnMoKVxyXG4gICAge1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXhwbGljaXRseSBydW5zIGludmFsaWRhdGlvbiBvZiBjb250ZW50IChjaGFuZ2UgZGV0ZWN0aW9uKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaW52YWxpZGF0ZVZpc3VhbHMoKTogdm9pZFxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHJvdGVjdGVkIG1ldGhvZHMgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZHMgb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgbG9hZE9wdGlvbnMoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0T3B0aW9ucyA9IHRoaXMuX29wdGlvbnNHYXRoZXJlci5hdmFpbGFibGVPcHRpb25zO1xyXG4gICAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRvZ2dsZXMgcG9wdXAgdmlzaWJpbGl0eVxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgdG9nZ2xlUG9wdXAoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucy52aXNpYmxlID0gIXRoaXMub3B0aW9ucy52aXNpYmxlO1xyXG4gICAgICAgIHRoaXMuX2NoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgY2xpY2sgb3V0c2lkZSBvZiBzZWxlY3QgZWxlbWVudFxyXG4gICAgICogQHBhcmFtIGV2ZW50IE1vdXNlIGV2ZW50IG9iamVjdFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX2hhbmRsZUNsaWNrT3V0c2lkZSA9IChldmVudDogTW91c2VFdmVudCkgPT5cclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLnNlbGVjdEVsZW1lbnQgIT0gZXZlbnQudGFyZ2V0ICYmICFpc0Rlc2NlbmRhbnQodGhpcy5zZWxlY3RFbGVtZW50LCBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVQb3B1cCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgdmlzaWJpbGl0eSBjaGFuZ2VcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIF9oYW5kbGVWaXNpYmlsaXR5Q2hhbmdlID0gKHZpc2libGU6IGJvb2xlYW4pID0+XHJcbiAgICB7XHJcbiAgICAgICAgaWYodGhpcy5vcHRpb25zLnZpc2libGUgIT0gdmlzaWJsZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy52aXNpYmxlID0gdmlzaWJsZTtcclxuICAgICAgICAgICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iXX0=
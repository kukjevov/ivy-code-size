var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { EventEmitter } from "@angular/core";
import { isPresent, isBlank } from "@asseco/common";
import { debounceTime } from "rxjs/operators";
import { LIVE_SEARCH } from "../../plugins/liveSearch/types";
/**
 * Class that is used as for options gathering in dynamic way, for example from external source when writing
 * @template TValue
 */
export class DynamicOptionsGatherer {
    //######################### constructor #########################
    /**
     * @param {?} _options
     */
    constructor(_options) {
        this._options = _options;
        /**
         * Minimal number of characters required for searching
         */
        this._minLength = 2;
        //######################### public properties - implementation of OptionsGatherer #########################
        /**
         * Array of provided options for select
         */
        this.options = [];
        /**
         * Occurs when array of provided options has changed
         */
        this.optionsChange = new EventEmitter();
        if (!this._options) {
            throw new Error("Options can not be null!");
        }
        if (this._options && isPresent(this._options.minLength)) {
            this._minLength = this._options.minLength;
        }
    }
    /**
     * Array of visible, displayed options for select
     * @return {?}
     */
    get availableOptions() {
        return this.options;
    }
    /**
     * Occurs when array of visible, displayed options has changed
     * @return {?}
     */
    get availableOptionsChange() {
        return this.optionsChange;
    }
    //######################### public methods - implementation of OptionsGatherer #########################
    /**
     * Initialize gatherer during initialization phase
     * @return {?}
     */
    initializeGatherer() {
        /** @type {?} */
        let liveSearch = (/** @type {?} */ (this.ngSelectPlugins[LIVE_SEARCH]));
        if (this._liveSearch && this._liveSearch != liveSearch) {
            this._searchValueChangeSubscription.unsubscribe();
            this._searchValueChangeSubscription = null;
            this._liveSearch = null;
        }
        if (!this._liveSearch) {
            this._liveSearch = liveSearch;
            /** @type {?} */
            let searchValueChange = this._liveSearch.searchValueChange;
            if (this._options.delay) {
                searchValueChange = searchValueChange.pipe(debounceTime(this._options.delay));
            }
            this._searchValueChangeSubscription = searchValueChange.subscribe((/**
             * @return {?}
             */
            () => __awaiter(this, void 0, void 0, function* () {
                if (isBlank(this._liveSearch.searchValue) || this._liveSearch.searchValue.length < this._minLength) {
                    this.options = [];
                    this.optionsChange.emit();
                    return;
                }
                this.options = yield this._options.dynamicOptionsCallback(this._liveSearch.searchValue);
                this.optionsChange.emit();
            })));
        }
    }
    /**
     * Called when gatherer needs to be destroyed
     * @return {?}
     */
    destroyGatherer() {
        if (this._searchValueChangeSubscription) {
            this._searchValueChangeSubscription.unsubscribe();
            this._searchValueChangeSubscription = null;
        }
    }
}
if (false) {
    /**
     * Live search plugin currently used in NgSelect
     * @type {?}
     * @protected
     */
    DynamicOptionsGatherer.prototype._liveSearch;
    /**
     * Subscription for changes of live search value
     * @type {?}
     * @protected
     */
    DynamicOptionsGatherer.prototype._searchValueChangeSubscription;
    /**
     * Minimal number of characters required for searching
     * @type {?}
     * @protected
     */
    DynamicOptionsGatherer.prototype._minLength;
    /**
     * Array of provided options for select
     * @type {?}
     */
    DynamicOptionsGatherer.prototype.options;
    /**
     * Occurs when array of provided options has changed
     * @type {?}
     */
    DynamicOptionsGatherer.prototype.optionsChange;
    /**
     * NgSelect plugin instances available for gatherer
     * @type {?}
     */
    DynamicOptionsGatherer.prototype.ngSelectPlugins;
    /**
     * @type {?}
     * @protected
     */
    DynamicOptionsGatherer.prototype._options;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHluYW1pY09wdGlvbnNHYXRoZXJlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9taXNjL29wdGlvbnNHYXRoZXJlci9keW5hbWljT3B0aW9uc0dhdGhlcmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUVsRCxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFPNUMsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGdDQUFnQyxDQUFDOzs7OztBQUszRCxNQUFNLE9BQU8sc0JBQXNCOzs7OztJQXFEL0IsWUFBc0IsUUFBK0M7UUFBL0MsYUFBUSxHQUFSLFFBQVEsQ0FBdUM7Ozs7UUFwQzNELGVBQVUsR0FBVyxDQUFDLENBQUM7Ozs7O1FBTzFCLFlBQU8sR0FBNkIsRUFBRSxDQUFDOzs7O1FBS3ZDLGtCQUFhLEdBQXVCLElBQUksWUFBWSxFQUFRLENBQUM7UUEwQmhFLElBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUNqQjtZQUNJLE1BQU0sSUFBSSxLQUFLLENBQUMsMEJBQTBCLENBQUMsQ0FBQztTQUMvQztRQUVELElBQUcsSUFBSSxDQUFDLFFBQVEsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFDdEQ7WUFDSSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO1NBQzdDO0lBQ0wsQ0FBQzs7Ozs7SUE5QkQsSUFBVyxnQkFBZ0I7UUFFdkIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3hCLENBQUM7Ozs7O0lBS0QsSUFBVyxzQkFBc0I7UUFFN0IsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzlCLENBQUM7Ozs7OztJQTBCTSxrQkFBa0I7O1lBRWpCLFVBQVUsR0FBRyxtQkFBQSxJQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQyxFQUFjO1FBRWhFLElBQUcsSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxJQUFJLFVBQVUsRUFDckQ7WUFDSSxJQUFJLENBQUMsOEJBQThCLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDbEQsSUFBSSxDQUFDLDhCQUE4QixHQUFHLElBQUksQ0FBQztZQUUzQyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztTQUMzQjtRQUVELElBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUNwQjtZQUNJLElBQUksQ0FBQyxXQUFXLEdBQUcsVUFBVSxDQUFDOztnQkFFMUIsaUJBQWlCLEdBQXFCLElBQUksQ0FBQyxXQUFXLENBQUMsaUJBQWlCO1lBRTVFLElBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQ3RCO2dCQUNJLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2FBQ2pGO1lBRUQsSUFBSSxDQUFDLDhCQUE4QixHQUFHLGlCQUFpQixDQUFDLFNBQVM7OztZQUFDLEdBQVMsRUFBRTtnQkFFekUsSUFBRyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFDakc7b0JBQ0ksSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7b0JBQ2xCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLENBQUM7b0JBRTFCLE9BQU87aUJBQ1Y7Z0JBRUQsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFDeEYsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUM5QixDQUFDLENBQUEsRUFBQyxDQUFDO1NBQ047SUFDTCxDQUFDOzs7OztJQUtNLGVBQWU7UUFFbEIsSUFBRyxJQUFJLENBQUMsOEJBQThCLEVBQ3RDO1lBQ0ksSUFBSSxDQUFDLDhCQUE4QixDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ2xELElBQUksQ0FBQyw4QkFBOEIsR0FBRyxJQUFJLENBQUM7U0FDOUM7SUFDTCxDQUFDO0NBQ0o7Ozs7Ozs7SUFsSEcsNkNBQWtDOzs7Ozs7SUFLbEMsZ0VBQXVEOzs7Ozs7SUFLdkQsNENBQWlDOzs7OztJQU9qQyx5Q0FBOEM7Ozs7O0lBSzlDLCtDQUFvRTs7Ozs7SUFxQnBFLGlEQUFnRDs7Ozs7SUFHcEMsMENBQXlEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtFdmVudEVtaXR0ZXJ9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7aXNQcmVzZW50LCBpc0JsYW5rfSBmcm9tIFwiQGFzc2Vjby9jb21tb25cIjtcclxuaW1wb3J0IHtTdWJzY3JpcHRpb24sIE9ic2VydmFibGV9IGZyb20gXCJyeGpzXCI7XHJcbmltcG9ydCB7ZGVib3VuY2VUaW1lfSBmcm9tIFwicnhqcy9vcGVyYXRvcnNcIjtcclxuXHJcbmltcG9ydCB7T3B0aW9uc0dhdGhlcmVyfSBmcm9tIFwiLi9vcHRpb25zR2F0aGVyZXIuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7TmdTZWxlY3RQbHVnaW5JbnN0YW5jZXN9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL3NlbGVjdFwiO1xyXG5pbXBvcnQge05nU2VsZWN0T3B0aW9ufSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9vcHRpb25cIjtcclxuaW1wb3J0IHtEeW5hbWljT3B0aW9uc0dhdGhlcmVyT3B0aW9uc30gZnJvbSBcIi4vZHluYW1pY09wdGlvbnNHYXRoZXJlci5pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHtMaXZlU2VhcmNofSBmcm9tIFwiLi4vLi4vcGx1Z2lucy9saXZlU2VhcmNoXCI7XHJcbmltcG9ydCB7TElWRV9TRUFSQ0h9IGZyb20gXCIuLi8uLi9wbHVnaW5zL2xpdmVTZWFyY2gvdHlwZXNcIjtcclxuXHJcbi8qKlxyXG4gKiBDbGFzcyB0aGF0IGlzIHVzZWQgYXMgZm9yIG9wdGlvbnMgZ2F0aGVyaW5nIGluIGR5bmFtaWMgd2F5LCBmb3IgZXhhbXBsZSBmcm9tIGV4dGVybmFsIHNvdXJjZSB3aGVuIHdyaXRpbmdcclxuICovXHJcbmV4cG9ydCBjbGFzcyBEeW5hbWljT3B0aW9uc0dhdGhlcmVyPFRWYWx1ZT4gaW1wbGVtZW50cyBPcHRpb25zR2F0aGVyZXI8VFZhbHVlPlxyXG57XHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHJvdGVjdGVkIGZpZWxkcyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMaXZlIHNlYXJjaCBwbHVnaW4gY3VycmVudGx5IHVzZWQgaW4gTmdTZWxlY3RcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIF9saXZlU2VhcmNoOiBMaXZlU2VhcmNoO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaXB0aW9uIGZvciBjaGFuZ2VzIG9mIGxpdmUgc2VhcmNoIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBfc2VhcmNoVmFsdWVDaGFuZ2VTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1pbmltYWwgbnVtYmVyIG9mIGNoYXJhY3RlcnMgcmVxdWlyZWQgZm9yIHNlYXJjaGluZ1xyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX21pbkxlbmd0aDogbnVtYmVyID0gMjtcclxuXHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHVibGljIHByb3BlcnRpZXMgLSBpbXBsZW1lbnRhdGlvbiBvZiBPcHRpb25zR2F0aGVyZXIgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXJyYXkgb2YgcHJvdmlkZWQgb3B0aW9ucyBmb3Igc2VsZWN0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvcHRpb25zOiBOZ1NlbGVjdE9wdGlvbjxUVmFsdWU+W10gPSBbXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9jY3VycyB3aGVuIGFycmF5IG9mIHByb3ZpZGVkIG9wdGlvbnMgaGFzIGNoYW5nZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9wdGlvbnNDaGFuZ2U6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFycmF5IG9mIHZpc2libGUsIGRpc3BsYXllZCBvcHRpb25zIGZvciBzZWxlY3RcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBhdmFpbGFibGVPcHRpb25zKCk6IE5nU2VsZWN0T3B0aW9uPFRWYWx1ZT5bXVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPY2N1cnMgd2hlbiBhcnJheSBvZiB2aXNpYmxlLCBkaXNwbGF5ZWQgb3B0aW9ucyBoYXMgY2hhbmdlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGF2YWlsYWJsZU9wdGlvbnNDaGFuZ2UoKTogRXZlbnRFbWl0dGVyPHZvaWQ+XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc0NoYW5nZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE5nU2VsZWN0IHBsdWdpbiBpbnN0YW5jZXMgYXZhaWxhYmxlIGZvciBnYXRoZXJlclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbmdTZWxlY3RQbHVnaW5zOiBOZ1NlbGVjdFBsdWdpbkluc3RhbmNlcztcclxuXHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgY29uc3RydWN0b3IgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIF9vcHRpb25zOiBEeW5hbWljT3B0aW9uc0dhdGhlcmVyT3B0aW9uczxUVmFsdWU+KVxyXG4gICAge1xyXG4gICAgICAgIGlmKCF0aGlzLl9vcHRpb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3B0aW9ucyBjYW4gbm90IGJlIG51bGwhXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5fb3B0aW9ucyAmJiBpc1ByZXNlbnQodGhpcy5fb3B0aW9ucy5taW5MZW5ndGgpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fbWluTGVuZ3RoID0gdGhpcy5fb3B0aW9ucy5taW5MZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBwdWJsaWMgbWV0aG9kcyAtIGltcGxlbWVudGF0aW9uIG9mIE9wdGlvbnNHYXRoZXJlciAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGdhdGhlcmVyIGR1cmluZyBpbml0aWFsaXphdGlvbiBwaGFzZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaW5pdGlhbGl6ZUdhdGhlcmVyKCk6IHZvaWRcclxuICAgIHtcclxuICAgICAgICBsZXQgbGl2ZVNlYXJjaCA9IHRoaXMubmdTZWxlY3RQbHVnaW5zW0xJVkVfU0VBUkNIXSBhcyBMaXZlU2VhcmNoO1xyXG5cclxuICAgICAgICBpZih0aGlzLl9saXZlU2VhcmNoICYmIHRoaXMuX2xpdmVTZWFyY2ggIT0gbGl2ZVNlYXJjaClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaFZhbHVlQ2hhbmdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaFZhbHVlQ2hhbmdlU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2xpdmVTZWFyY2ggPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoIXRoaXMuX2xpdmVTZWFyY2gpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLl9saXZlU2VhcmNoID0gbGl2ZVNlYXJjaDtcclxuXHJcbiAgICAgICAgICAgIGxldCBzZWFyY2hWYWx1ZUNoYW5nZTogT2JzZXJ2YWJsZTx2b2lkPiA9IHRoaXMuX2xpdmVTZWFyY2guc2VhcmNoVmFsdWVDaGFuZ2U7XHJcblxyXG4gICAgICAgICAgICBpZih0aGlzLl9vcHRpb25zLmRlbGF5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzZWFyY2hWYWx1ZUNoYW5nZSA9IHNlYXJjaFZhbHVlQ2hhbmdlLnBpcGUoZGVib3VuY2VUaW1lKHRoaXMuX29wdGlvbnMuZGVsYXkpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoVmFsdWVDaGFuZ2VTdWJzY3JpcHRpb24gPSBzZWFyY2hWYWx1ZUNoYW5nZS5zdWJzY3JpYmUoYXN5bmMgKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYoaXNCbGFuayh0aGlzLl9saXZlU2VhcmNoLnNlYXJjaFZhbHVlKSB8fCB0aGlzLl9saXZlU2VhcmNoLnNlYXJjaFZhbHVlLmxlbmd0aCA8IHRoaXMuX21pbkxlbmd0aClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnNDaGFuZ2UuZW1pdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gYXdhaXQgdGhpcy5fb3B0aW9ucy5keW5hbWljT3B0aW9uc0NhbGxiYWNrKHRoaXMuX2xpdmVTZWFyY2guc2VhcmNoVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zQ2hhbmdlLmVtaXQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHdoZW4gZ2F0aGVyZXIgbmVlZHMgdG8gYmUgZGVzdHJveWVkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZXN0cm95R2F0aGVyZXIoKTogdm9pZFxyXG4gICAge1xyXG4gICAgICAgIGlmKHRoaXMuX3NlYXJjaFZhbHVlQ2hhbmdlU3Vic2NyaXB0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoVmFsdWVDaGFuZ2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoVmFsdWVDaGFuZ2VTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdfQ==
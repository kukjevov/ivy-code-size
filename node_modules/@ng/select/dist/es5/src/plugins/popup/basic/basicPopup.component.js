/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ChangeDetectionStrategy, ChangeDetectorRef, Inject, Optional, ElementRef, EventEmitter, ViewChildren, QueryList } from '@angular/core';
import { DOCUMENT } from '@angular/common';
import { extend, isDescendant } from '@asseco/common';
import { NG_SELECT_PLUGIN_INSTANCES } from '../../../components/select/types';
import { POPUP_OPTIONS } from '../types';
import { NORMAL_STATE } from '../../normalState/types';
import { KEYBOARD_HANDLER } from '../../keyboardHandler/types';
import { VALUE_HANDLER } from '../../valueHandler/types';
/**
 * Default options for popup
 * \@internal
 * @type {?}
 */
var defaultOptions = {
    cssClasses: {
        optionChecked: 'fa fa-check',
        optionItemDiv: 'option-item',
        optionItemTextDiv: 'option-item-text',
        popupDiv: 'popup-div'
    },
    visible: false
};
/**
 * Component used for rendering basic popup with options
 */
var BasicPopupComponent = /** @class */ (function () {
    //######################### constructor #########################
    function BasicPopupComponent(ngSelectPlugins, pluginElement, _changeDetector, options, _document) {
        var _this = this;
        this.ngSelectPlugins = ngSelectPlugins;
        this.pluginElement = pluginElement;
        this._changeDetector = _changeDetector;
        this._document = _document;
        /**
         * Indication whether is popup visible
         */
        this._popupVisible = false;
        /**
         * Occurs when user clicks on option, clicked options is passed as argument
         */
        this.optionClick = new EventEmitter();
        /**
         * Occurs when visibility of popup has changed
         */
        this.visibilityChange = new EventEmitter();
        /**
         * Handles click outside of select element
         * @param event Mouse event object
         */
        this._handleClickOutside = (/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (_this.selectElement != event.target && !isDescendant(_this.selectElement, (/** @type {?} */ (event.target)))) {
                _this.togglePopup();
            }
        });
        /**
         * Handles visibility change
         */
        this._handleVisibilityChange = (/**
         * @param {?} visible
         * @return {?}
         */
        function (visible) {
            if (_this.options.visible != visible) {
                _this.options.visible = visible;
                _this._changeDetector.detectChanges();
            }
        });
        this._options = extend(true, {}, defaultOptions, options);
    }
    Object.defineProperty(BasicPopupComponent.prototype, "options", {
        //######################### public properties - implementation of BasicPopup #########################
        /**
         * Options for NgSelect plugin
         */
        get: 
        //######################### public properties - implementation of BasicPopup #########################
        /**
         * Options for NgSelect plugin
         * @return {?}
         */
        function () {
            return this._options;
        },
        set: /**
         * @param {?} options
         * @return {?}
         */
        function (options) {
            this._options = extend(true, this._options, options);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BasicPopupComponent.prototype, "popupElement", {
        /**
         * Html element that represents popup itself
         */
        get: /**
         * Html element that represents popup itself
         * @return {?}
         */
        function () {
            /** @type {?} */
            var ref = this.popupElementChildren.first;
            if (!ref) {
                return null;
            }
            return ref.nativeElement;
        },
        enumerable: true,
        configurable: true
    });
    //######################### public methods - implementation of AfterViewInit #########################
    /**
     * Called when view was initialized
     */
    //######################### public methods - implementation of AfterViewInit #########################
    /**
     * Called when view was initialized
     * @return {?}
     */
    BasicPopupComponent.prototype.ngAfterViewInit = 
    //######################### public methods - implementation of AfterViewInit #########################
    /**
     * Called when view was initialized
     * @return {?}
     */
    function () {
        var _this = this;
        this.popupElementChildren.changes.subscribe((/**
         * @return {?}
         */
        function () {
            if (!!_this.popupElementChildren.first == _this._popupVisible) {
                return;
            }
            //handle click outside
            if (_this.popupElementChildren.first) {
                _this._document.addEventListener('mouseup', _this._handleClickOutside);
            }
            //unregister handle click outside
            else {
                _this._document.removeEventListener('mouseup', _this._handleClickOutside);
            }
            _this._popupVisible = !!_this.popupElementChildren.first;
            _this.visibilityChange.emit();
        }));
    };
    //######################### public methods - implementation of OnDestroy #########################
    /**
     * Called when component is destroyed
     */
    //######################### public methods - implementation of OnDestroy #########################
    /**
     * Called when component is destroyed
     * @return {?}
     */
    BasicPopupComponent.prototype.ngOnDestroy = 
    //######################### public methods - implementation of OnDestroy #########################
    /**
     * Called when component is destroyed
     * @return {?}
     */
    function () {
        if (this._optionsChangeSubscription) {
            this._optionsChangeSubscription.unsubscribe();
            this._optionsChangeSubscription = null;
        }
        if (this._clickSubscription) {
            this._clickSubscription.unsubscribe();
            this._clickSubscription = null;
        }
        if (this._khPopupVisibilityRequestSubscription) {
            this._khPopupVisibilityRequestSubscription.unsubscribe();
            this._khPopupVisibilityRequestSubscription = null;
        }
        if (this._vhPopupVisibilityRequestSubscription) {
            this._vhPopupVisibilityRequestSubscription.unsubscribe();
            this._vhPopupVisibilityRequestSubscription = null;
        }
        this._document.removeEventListener('mouseup', this._handleClickOutside);
    };
    //######################### public methods - implementation of BasicPopup #########################
    /**
     * Initialize plugin, to be ready to use, initialize communication with other plugins
     */
    //######################### public methods - implementation of BasicPopup #########################
    /**
     * Initialize plugin, to be ready to use, initialize communication with other plugins
     * @return {?}
     */
    BasicPopupComponent.prototype.initialize = 
    //######################### public methods - implementation of BasicPopup #########################
    /**
     * Initialize plugin, to be ready to use, initialize communication with other plugins
     * @return {?}
     */
    function () {
        var _this = this;
        if (this._optionsGatherer && this._optionsGatherer != this.optionsGatherer) {
            this._optionsChangeSubscription.unsubscribe();
            this._optionsChangeSubscription = null;
            this._optionsGatherer = null;
        }
        if (!this._optionsGatherer) {
            this._optionsGatherer = this.optionsGatherer;
            this._optionsChangeSubscription = this._optionsGatherer.availableOptionsChange.subscribe((/**
             * @return {?}
             */
            function () { return _this.loadOptions(); }));
        }
        /** @type {?} */
        var normalState = (/** @type {?} */ (this.ngSelectPlugins[NORMAL_STATE]));
        if (this._normalState && this._normalState != normalState) {
            this._clickSubscription.unsubscribe();
            this._clickSubscription = null;
            this._normalState = null;
        }
        if (!this._normalState) {
            this._normalState = normalState;
            this._clickSubscription = this._normalState.click.subscribe((/**
             * @return {?}
             */
            function () { return _this.togglePopup(); }));
        }
        /** @type {?} */
        var keyboardHandler = (/** @type {?} */ (this.ngSelectPlugins[KEYBOARD_HANDLER]));
        if (this._keyboardHandler && this._keyboardHandler != keyboardHandler) {
            this._khPopupVisibilityRequestSubscription.unsubscribe();
            this._khPopupVisibilityRequestSubscription = null;
            this._keyboardHandler = null;
        }
        if (!this._keyboardHandler) {
            this._keyboardHandler = keyboardHandler;
            this._khPopupVisibilityRequestSubscription = this._keyboardHandler.popupVisibilityRequest.subscribe(this._handleVisibilityChange);
        }
        /** @type {?} */
        var valueHandler = (/** @type {?} */ (this.ngSelectPlugins[VALUE_HANDLER]));
        if (this._valueHandler && this._valueHandler != valueHandler) {
            this._vhPopupVisibilityRequestSubscription.unsubscribe();
            this._vhPopupVisibilityRequestSubscription = null;
            this._valueHandler = null;
        }
        if (!this._valueHandler) {
            this._valueHandler = valueHandler;
            this._vhPopupVisibilityRequestSubscription = this._valueHandler.popupVisibilityRequest.subscribe(this._handleVisibilityChange);
        }
        this.loadOptions();
    };
    /**
     * Initialize plugin options, all operations required to be done with plugin options are handled here
     */
    /**
     * Initialize plugin options, all operations required to be done with plugin options are handled here
     * @return {?}
     */
    BasicPopupComponent.prototype.initOptions = /**
     * Initialize plugin options, all operations required to be done with plugin options are handled here
     * @return {?}
     */
    function () {
    };
    /**
     * Explicitly runs invalidation of content (change detection)
     */
    /**
     * Explicitly runs invalidation of content (change detection)
     * @return {?}
     */
    BasicPopupComponent.prototype.invalidateVisuals = /**
     * Explicitly runs invalidation of content (change detection)
     * @return {?}
     */
    function () {
        this._changeDetector.detectChanges();
    };
    //######################### protected methods #########################
    /**
     * Loads options
     */
    //######################### protected methods #########################
    /**
     * Loads options
     * @protected
     * @return {?}
     */
    BasicPopupComponent.prototype.loadOptions = 
    //######################### protected methods #########################
    /**
     * Loads options
     * @protected
     * @return {?}
     */
    function () {
        this.selectOptions = this._optionsGatherer.availableOptions;
        this._changeDetector.detectChanges();
    };
    /**
     * Toggles popup visibility
     */
    /**
     * Toggles popup visibility
     * @protected
     * @return {?}
     */
    BasicPopupComponent.prototype.togglePopup = /**
     * Toggles popup visibility
     * @protected
     * @return {?}
     */
    function () {
        this.options.visible = !this.options.visible;
        this._changeDetector.detectChanges();
    };
    BasicPopupComponent.decorators = [
        { type: Component, args: [{
                    selector: "div.ng-select-popup",
                    template: "<ng-template #defaultOptionTextLook let-option>{{option?.text}}</ng-template>\r\n\r\n<div #popupDiv \r\n     *ngIf=\"options?.visible\"\r\n     [ngClass]=\"options?.cssClasses?.popupDiv\">\r\n    <ng-content></ng-content>\r\n\r\n    <div *ngFor=\"let option of selectOptions\"\r\n         [ngClass]=\"options?.cssClasses?.optionItemDiv\"\r\n         [class.selected]=\"option?.selected\"\r\n         [class.active]=\"option?.active\"\r\n         (click)=\"optionClick?.emit(option)\">\r\n        <div [ngClass]=\"options?.cssClasses?.optionItemTextDiv\">\r\n            <ng-container *ngTemplateOutlet=\"templateGatherer?.optionTemplate || defaultOptionTextLook; context: {$implicit: option, popup: this}\"></ng-container>\r\n        </div>\r\n\r\n        <div *ngIf=\"option?.selected && options?.multiple\" [ngClass]=\"options?.cssClasses?.optionChecked\"></div>\r\n    </div>\r\n</div>",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: [".popup-div\n        {\n            position: absolute;\n            z-index: 250;\n            background-color: #FFFFFF;\n            border-radius: 4px;\n            border: 1px solid #BBBBBB;\n            overflow: auto;\n            min-width: 100%;\n            padding: 5px 0;\n            box-shadow: 0 6px 12px rgba(0,0,0,.175);\n            scrollbar-width: thin;\n        }\n\n        .popup-div::-webkit-scrollbar-thumb \n        {\n            background-color: #cdcdcd;\n        }\n        \n        .popup-div::-webkit-scrollbar \n        {\n            width: 6px;\n            background-color: #f0f0f0;\n        }\n\n        .option-item\n        {\n            padding: 3px 12px;\n            display: flex;\n            align-items: center;\n        }\n\n        .option-item .option-item-text\n        {\n            min-width: 0;\n            flex: 1;\n            white-space: nowrap;\n        }\n\n        .option-item .option-item-text:hover\n        {\n            cursor: pointer;\n        }\n\n        .option-item .fa-check\n        {\n            margin-left: 8px;\n        }\n\n        .option-item.selected,\n        .option-item.active\n        {\n            background-color: #E8E8E8;\n            background-image: linear-gradient(to bottom,#F5F5F5 0,#E8E8E8 100%);\n        }\n\n        .option-item:hover\n        {\n            background-color: #E8E8E8;\n            background-image: linear-gradient(to bottom,#F5F5F5 0,#E8E8E8 100%);\n            cursor: pointer;\n        }"]
                }] }
    ];
    /** @nocollapse */
    BasicPopupComponent.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Inject, args: [NG_SELECT_PLUGIN_INSTANCES,] }, { type: Optional }] },
        { type: ElementRef },
        { type: ChangeDetectorRef },
        { type: undefined, decorators: [{ type: Inject, args: [POPUP_OPTIONS,] }, { type: Optional }] },
        { type: HTMLDocument, decorators: [{ type: Inject, args: [DOCUMENT,] }] }
    ]; };
    BasicPopupComponent.propDecorators = {
        popupElementChildren: [{ type: ViewChildren, args: ['popupDiv',] }]
    };
    return BasicPopupComponent;
}());
export { BasicPopupComponent };
if (false) {
    /**
     * Options for NgSelect plugin
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._options;
    /**
     * Instance of previous options gatherer, that is used for obtaining available options
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._optionsGatherer;
    /**
     * Subscription for changes of options in options gatherer
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._optionsChangeSubscription;
    /**
     * Subscription for click event on normal state
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._clickSubscription;
    /**
     * Subscription for popup visibility request from keyboard handler
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._khPopupVisibilityRequestSubscription;
    /**
     * Subscription for popup visibility request from value handler
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._vhPopupVisibilityRequestSubscription;
    /**
     * Normal state that is displayed
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._normalState;
    /**
     * Keyboard handler that is used
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._keyboardHandler;
    /**
     * Value handler that is used
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._valueHandler;
    /**
     * Indication whether is popup visible
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._popupVisible;
    /**
     * Instance of options gatherer, that is used for obtaining available options
     * @type {?}
     */
    BasicPopupComponent.prototype.optionsGatherer;
    /**
     * Gatherer used for obtaining custom templates
     * @type {?}
     */
    BasicPopupComponent.prototype.templateGatherer;
    /**
     * HTML element that represents select itself
     * @type {?}
     */
    BasicPopupComponent.prototype.selectElement;
    /**
     * Occurs when user clicks on option, clicked options is passed as argument
     * @type {?}
     */
    BasicPopupComponent.prototype.optionClick;
    /**
     * Occurs when visibility of popup has changed
     * @type {?}
     */
    BasicPopupComponent.prototype.visibilityChange;
    /**
     * Array of select options available
     * \@internal
     * @type {?}
     */
    BasicPopupComponent.prototype.selectOptions;
    /**
     * Watch for visibility of popup div element
     * \@internal
     * @type {?}
     */
    BasicPopupComponent.prototype.popupElementChildren;
    /**
     * Handles click outside of select element
     * \@param event Mouse event object
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._handleClickOutside;
    /**
     * Handles visibility change
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._handleVisibilityChange;
    /** @type {?} */
    BasicPopupComponent.prototype.ngSelectPlugins;
    /** @type {?} */
    BasicPopupComponent.prototype.pluginElement;
    /**
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._changeDetector;
    /**
     * @type {?}
     * @protected
     */
    BasicPopupComponent.prototype._document;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaWNQb3B1cC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvcGx1Z2lucy9wb3B1cC9iYXNpYy9iYXNpY1BvcHVwLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSx1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBYSxZQUFZLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBZ0IsTUFBTSxlQUFlLENBQUM7QUFDbkwsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLGlCQUFpQixDQUFDO0FBQ3pDLE9BQU8sRUFBQyxNQUFNLEVBQUUsWUFBWSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFNcEQsT0FBTyxFQUFDLDBCQUEwQixFQUFDLE1BQU0sa0NBQWtDLENBQUM7QUFDNUUsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLFVBQVUsQ0FBQztBQUd2QyxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFFckQsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sNkJBQTZCLENBQUM7QUFFN0QsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLDBCQUEwQixDQUFDOzs7Ozs7SUFNakQsY0FBYyxHQUNwQjtJQUNJLFVBQVUsRUFDVjtRQUNJLGFBQWEsRUFBRSxhQUFhO1FBQzVCLGFBQWEsRUFBRSxhQUFhO1FBQzVCLGlCQUFpQixFQUFFLGtCQUFrQjtRQUNyQyxRQUFRLEVBQUUsV0FBVztLQUN4QjtJQUNELE9BQU8sRUFBRSxLQUFLO0NBQ2pCOzs7O0FBS0Q7SUFvTUksaUVBQWlFO0lBQ2pFLDZCQUFtRSxlQUF3QyxFQUN4RixhQUF5QixFQUN0QixlQUFrQyxFQUNULE9BQTJCLEVBQ2xDLFNBQXdCO1FBSmhFLGlCQU9DO1FBUGtFLG9CQUFlLEdBQWYsZUFBZSxDQUF5QjtRQUN4RixrQkFB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QUFDLGVBQWUsQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN6QyxDQUFDOztnQkEzWEosU0FBUyxTQUNWO29CQUNJLFFBQVEsRUFBRSxxQkFBcUI7b0JBQy9CLG80QkFBd0M7b0JBQ3hDLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNOzZCQUczQyw2K0NBNkRFO2lCQUVUOzs7O2dEQStIZ0IsTUFBTSxTQUFDLDBCQUEwQixjQUFHLFFBQVE7Z0JBMU9vQixVQUFVO2dCQUEvQyxpQkFBaUI7Z0RBNk81QyxNQUFNLFNBQUMsYUFBYSxjQUFHLFFBQVE7Z0JBQ1EsWUFBWSx1QkFBbkQsTUFBTSxTQUFDLFFBQVE7Ozt1Q0FSM0IsWUFBWSxTQUFDLFVBQVU7O0lBbU41QiwwQkFBQztDQUFBLEFBcFpELElBb1pDO1NBN1VZLG1CQUFtQjs7Ozs7OztJQU81Qix1Q0FBc0M7Ozs7OztJQUt0QywrQ0FBaUQ7Ozs7OztJQUtqRCx5REFBbUQ7Ozs7OztJQUtuRCxpREFBMkM7Ozs7OztJQUszQyxvRUFBOEQ7Ozs7OztJQUs5RCxvRUFBOEQ7Ozs7OztJQUs5RCwyQ0FBb0M7Ozs7OztJQUtwQywrQ0FBNEM7Ozs7OztJQUs1Qyw0Q0FBMkM7Ozs7OztJQUszQyw0Q0FBeUM7Ozs7O0lBbUJ6Qyw4Q0FBNkM7Ozs7O0lBSzdDLCtDQUEwQzs7Ozs7SUFLMUMsNENBQWtDOzs7OztJQUtsQywwQ0FBZ0c7Ozs7O0lBS2hHLCtDQUF1RTs7Ozs7O0lBdUJ2RSw0Q0FBNkM7Ozs7OztJQVE3QyxtREFDZ0U7Ozs7Ozs7SUErTGhFLGtEQU1DOzs7Ozs7SUFLRCxzREFPRTs7SUE5TVUsOENBQStGOztJQUMvRiw0Q0FBZ0M7Ozs7O0lBQ2hDLDhDQUE0Qzs7Ozs7SUFFNUMsd0NBQW9EIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDaGFuZ2VEZXRlY3RvclJlZiwgSW5qZWN0LCBPcHRpb25hbCwgRWxlbWVudFJlZiwgT25EZXN0cm95LCBFdmVudEVtaXR0ZXIsIFZpZXdDaGlsZHJlbiwgUXVlcnlMaXN0LCBBZnRlclZpZXdJbml0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtET0NVTUVOVH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHtleHRlbmQsIGlzRGVzY2VuZGFudH0gZnJvbSAnQGFzc2Vjby9jb21tb24nO1xyXG5pbXBvcnQge1N1YnNjcmlwdGlvbn0gZnJvbSAncnhqcyc7XHJcblxyXG5pbXBvcnQge0Jhc2ljUG9wdXBPcHRpb25zLCBCYXNpY1BvcHVwfSBmcm9tICcuL2Jhc2ljUG9wdXAuaW50ZXJmYWNlJztcclxuaW1wb3J0IHtOZ1NlbGVjdFBsdWdpbkdlbmVyaWMsIE9wdGlvbnNHYXRoZXJlciwgVGVtcGxhdGVHYXRoZXJlcn0gZnJvbSAnLi4vLi4vLi4vbWlzYyc7XHJcbmltcG9ydCB7TmdTZWxlY3RQbHVnaW5JbnN0YW5jZXN9IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvc2VsZWN0JztcclxuaW1wb3J0IHtOR19TRUxFQ1RfUExVR0lOX0lOU1RBTkNFU30gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9zZWxlY3QvdHlwZXMnO1xyXG5pbXBvcnQge1BPUFVQX09QVElPTlN9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHvJtU5nU2VsZWN0T3B0aW9uLCBOZ1NlbGVjdE9wdGlvbn0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9vcHRpb24nO1xyXG5pbXBvcnQge05vcm1hbFN0YXRlfSBmcm9tICcuLi8uLi9ub3JtYWxTdGF0ZSc7XHJcbmltcG9ydCB7Tk9STUFMX1NUQVRFfSBmcm9tICcuLi8uLi9ub3JtYWxTdGF0ZS90eXBlcyc7XHJcbmltcG9ydCB7S2V5Ym9hcmRIYW5kbGVyfSBmcm9tICcuLi8uLi9rZXlib2FyZEhhbmRsZXInO1xyXG5pbXBvcnQge0tFWUJPQVJEX0hBTkRMRVJ9IGZyb20gJy4uLy4uL2tleWJvYXJkSGFuZGxlci90eXBlcyc7XHJcbmltcG9ydCB7VmFsdWVIYW5kbGVyfSBmcm9tICcuLi8uLi92YWx1ZUhhbmRsZXInO1xyXG5pbXBvcnQge1ZBTFVFX0hBTkRMRVJ9IGZyb20gJy4uLy4uL3ZhbHVlSGFuZGxlci90eXBlcyc7XHJcblxyXG4vKipcclxuICogRGVmYXVsdCBvcHRpb25zIGZvciBwb3B1cFxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IGRlZmF1bHRPcHRpb25zOiBCYXNpY1BvcHVwT3B0aW9ucyA9XHJcbntcclxuICAgIGNzc0NsYXNzZXM6XHJcbiAgICB7XHJcbiAgICAgICAgb3B0aW9uQ2hlY2tlZDogJ2ZhIGZhLWNoZWNrJyxcclxuICAgICAgICBvcHRpb25JdGVtRGl2OiAnb3B0aW9uLWl0ZW0nLFxyXG4gICAgICAgIG9wdGlvbkl0ZW1UZXh0RGl2OiAnb3B0aW9uLWl0ZW0tdGV4dCcsXHJcbiAgICAgICAgcG9wdXBEaXY6ICdwb3B1cC1kaXYnXHJcbiAgICB9LFxyXG4gICAgdmlzaWJsZTogZmFsc2VcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDb21wb25lbnQgdXNlZCBmb3IgcmVuZGVyaW5nIGJhc2ljIHBvcHVwIHdpdGggb3B0aW9uc1xyXG4gKi9cclxuQENvbXBvbmVudChcclxue1xyXG4gICAgc2VsZWN0b3I6IFwiZGl2Lm5nLXNlbGVjdC1wb3B1cFwiLFxyXG4gICAgdGVtcGxhdGVVcmw6ICdiYXNpY1BvcHVwLmNvbXBvbmVudC5odG1sJyxcclxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gICAgc3R5bGVzOlxyXG4gICAgW1xyXG4gICAgICAgIGAucG9wdXAtZGl2XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgIHotaW5kZXg6IDI1MDtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkZGRjtcclxuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjQkJCQkJCO1xyXG4gICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcclxuICAgICAgICAgICAgbWluLXdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICBwYWRkaW5nOiA1cHggMDtcclxuICAgICAgICAgICAgYm94LXNoYWRvdzogMCA2cHggMTJweCByZ2JhKDAsMCwwLC4xNzUpO1xyXG4gICAgICAgICAgICBzY3JvbGxiYXItd2lkdGg6IHRoaW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAucG9wdXAtZGl2Ojotd2Via2l0LXNjcm9sbGJhci10aHVtYiBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNjZGNkY2Q7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC5wb3B1cC1kaXY6Oi13ZWJraXQtc2Nyb2xsYmFyIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2lkdGg6IDZweDtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5vcHRpb24taXRlbVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcGFkZGluZzogM3B4IDEycHg7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAub3B0aW9uLWl0ZW0gLm9wdGlvbi1pdGVtLXRleHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1pbi13aWR0aDogMDtcclxuICAgICAgICAgICAgZmxleDogMTtcclxuICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5vcHRpb24taXRlbSAub3B0aW9uLWl0ZW0tdGV4dDpob3ZlclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLm9wdGlvbi1pdGVtIC5mYS1jaGVja1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDhweDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5vcHRpb24taXRlbS5zZWxlY3RlZCxcclxuICAgICAgICAub3B0aW9uLWl0ZW0uYWN0aXZlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRThFOEU4O1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCNGNUY1RjUgMCwjRThFOEU4IDEwMCUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLm9wdGlvbi1pdGVtOmhvdmVyXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRThFOEU4O1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCNGNUY1RjUgMCwjRThFOEU4IDEwMCUpO1xyXG4gICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgfWBcclxuICAgIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIEJhc2ljUG9wdXBDb21wb25lbnQgaW1wbGVtZW50cyBCYXNpY1BvcHVwLCBOZ1NlbGVjdFBsdWdpbkdlbmVyaWM8QmFzaWNQb3B1cE9wdGlvbnM+LCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3lcclxue1xyXG4gICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIHByb3RlY3RlZCBmaWVsZHMgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogT3B0aW9ucyBmb3IgTmdTZWxlY3QgcGx1Z2luXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBfb3B0aW9uczogQmFzaWNQb3B1cE9wdGlvbnM7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnN0YW5jZSBvZiBwcmV2aW91cyBvcHRpb25zIGdhdGhlcmVyLCB0aGF0IGlzIHVzZWQgZm9yIG9idGFpbmluZyBhdmFpbGFibGUgb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX29wdGlvbnNHYXRoZXJlcjogT3B0aW9uc0dhdGhlcmVyPGFueT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpcHRpb24gZm9yIGNoYW5nZXMgb2Ygb3B0aW9ucyBpbiBvcHRpb25zIGdhdGhlcmVyXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBfb3B0aW9uc0NoYW5nZVN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaXB0aW9uIGZvciBjbGljayBldmVudCBvbiBub3JtYWwgc3RhdGVcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIF9jbGlja1N1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaXB0aW9uIGZvciBwb3B1cCB2aXNpYmlsaXR5IHJlcXVlc3QgZnJvbSBrZXlib2FyZCBoYW5kbGVyXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBfa2hQb3B1cFZpc2liaWxpdHlSZXF1ZXN0U3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpcHRpb24gZm9yIHBvcHVwIHZpc2liaWxpdHkgcmVxdWVzdCBmcm9tIHZhbHVlIGhhbmRsZXJcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIF92aFBvcHVwVmlzaWJpbGl0eVJlcXVlc3RTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE5vcm1hbCBzdGF0ZSB0aGF0IGlzIGRpc3BsYXllZFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX25vcm1hbFN0YXRlOiBOb3JtYWxTdGF0ZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEtleWJvYXJkIGhhbmRsZXIgdGhhdCBpcyB1c2VkXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBfa2V5Ym9hcmRIYW5kbGVyOiBLZXlib2FyZEhhbmRsZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWYWx1ZSBoYW5kbGVyIHRoYXQgaXMgdXNlZFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX3ZhbHVlSGFuZGxlcjogVmFsdWVIYW5kbGVyPGFueT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbmRpY2F0aW9uIHdoZXRoZXIgaXMgcG9wdXAgdmlzaWJsZVxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX3BvcHVwVmlzaWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBwdWJsaWMgcHJvcGVydGllcyAtIGltcGxlbWVudGF0aW9uIG9mIEJhc2ljUG9wdXAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogT3B0aW9ucyBmb3IgTmdTZWxlY3QgcGx1Z2luXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgb3B0aW9ucygpOiBCYXNpY1BvcHVwT3B0aW9uc1xyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBvcHRpb25zKG9wdGlvbnM6IEJhc2ljUG9wdXBPcHRpb25zKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBleHRlbmQodHJ1ZSwgdGhpcy5fb3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnN0YW5jZSBvZiBvcHRpb25zIGdhdGhlcmVyLCB0aGF0IGlzIHVzZWQgZm9yIG9idGFpbmluZyBhdmFpbGFibGUgb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb3B0aW9uc0dhdGhlcmVyOiBPcHRpb25zR2F0aGVyZXI8YW55PjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdhdGhlcmVyIHVzZWQgZm9yIG9idGFpbmluZyBjdXN0b20gdGVtcGxhdGVzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0ZW1wbGF0ZUdhdGhlcmVyOiBUZW1wbGF0ZUdhdGhlcmVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSFRNTCBlbGVtZW50IHRoYXQgcmVwcmVzZW50cyBzZWxlY3QgaXRzZWxmXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZWxlY3RFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9jY3VycyB3aGVuIHVzZXIgY2xpY2tzIG9uIG9wdGlvbiwgY2xpY2tlZCBvcHRpb25zIGlzIHBhc3NlZCBhcyBhcmd1bWVudFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb3B0aW9uQ2xpY2s6IEV2ZW50RW1pdHRlcjxOZ1NlbGVjdE9wdGlvbjxhbnk+PiA9IG5ldyBFdmVudEVtaXR0ZXI8TmdTZWxlY3RPcHRpb248YW55Pj4oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9jY3VycyB3aGVuIHZpc2liaWxpdHkgb2YgcG9wdXAgaGFzIGNoYW5nZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHZpc2liaWxpdHlDaGFuZ2U6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEh0bWwgZWxlbWVudCB0aGF0IHJlcHJlc2VudHMgcG9wdXAgaXRzZWxmXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcG9wdXBFbGVtZW50KCk6IEhUTUxFbGVtZW50XHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHJlZiA9IHRoaXMucG9wdXBFbGVtZW50Q2hpbGRyZW4uZmlyc3Q7XHJcblxyXG4gICAgICAgIGlmKCFyZWYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZWYubmF0aXZlRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHVibGljIHByb3BlcnRpZXMgLSB0ZW1wbGF0ZSBiaW5kaW5ncyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcnJheSBvZiBzZWxlY3Qgb3B0aW9ucyBhdmFpbGFibGVcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2VsZWN0T3B0aW9uczogybVOZ1NlbGVjdE9wdGlvbjxhbnk+W107XHJcblxyXG4gICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIHB1YmxpYyBwcm9wZXJ0aWVzIC0gY2hpbGRyZW4gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2F0Y2ggZm9yIHZpc2liaWxpdHkgb2YgcG9wdXAgZGl2IGVsZW1lbnRcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBAVmlld0NoaWxkcmVuKCdwb3B1cERpdicpXHJcbiAgICBwdWJsaWMgcG9wdXBFbGVtZW50Q2hpbGRyZW46IFF1ZXJ5TGlzdDxFbGVtZW50UmVmPEhUTUxFbGVtZW50Pj47XHJcblxyXG4gICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIGNvbnN0cnVjdG9yICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuICAgIGNvbnN0cnVjdG9yKEBJbmplY3QoTkdfU0VMRUNUX1BMVUdJTl9JTlNUQU5DRVMpIEBPcHRpb25hbCgpIHB1YmxpYyBuZ1NlbGVjdFBsdWdpbnM6IE5nU2VsZWN0UGx1Z2luSW5zdGFuY2VzLFxyXG4gICAgICAgICAgICAgICAgcHVibGljIHBsdWdpbkVsZW1lbnQ6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgX2NoYW5nZURldGVjdG9yOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICAgICAgICAgIEBJbmplY3QoUE9QVVBfT1BUSU9OUykgQE9wdGlvbmFsKCkgb3B0aW9ucz86IEJhc2ljUG9wdXBPcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgQEluamVjdChET0NVTUVOVCkgcHJvdGVjdGVkIF9kb2N1bWVudD86IEhUTUxEb2N1bWVudClcclxuICAgIHtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gZXh0ZW5kKHRydWUsIHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIHB1YmxpYyBtZXRob2RzIC0gaW1wbGVtZW50YXRpb24gb2YgQWZ0ZXJWaWV3SW5pdCAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgd2hlbiB2aWV3IHdhcyBpbml0aWFsaXplZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbmdBZnRlclZpZXdJbml0KClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnBvcHVwRWxlbWVudENoaWxkcmVuLmNoYW5nZXMuc3Vic2NyaWJlKCgpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZighIXRoaXMucG9wdXBFbGVtZW50Q2hpbGRyZW4uZmlyc3QgPT0gdGhpcy5fcG9wdXBWaXNpYmxlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vaGFuZGxlIGNsaWNrIG91dHNpZGVcclxuICAgICAgICAgICAgaWYodGhpcy5wb3B1cEVsZW1lbnRDaGlsZHJlbi5maXJzdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2hhbmRsZUNsaWNrT3V0c2lkZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy91bnJlZ2lzdGVyIGhhbmRsZSBjbGljayBvdXRzaWRlXHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2hhbmRsZUNsaWNrT3V0c2lkZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwVmlzaWJsZSA9ICEhdGhpcy5wb3B1cEVsZW1lbnRDaGlsZHJlbi5maXJzdDtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmlsaXR5Q2hhbmdlLmVtaXQoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBwdWJsaWMgbWV0aG9kcyAtIGltcGxlbWVudGF0aW9uIG9mIE9uRGVzdHJveSAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgd2hlbiBjb21wb25lbnQgaXMgZGVzdHJveWVkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBuZ09uRGVzdHJveSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYodGhpcy5fb3B0aW9uc0NoYW5nZVN1YnNjcmlwdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnNDaGFuZ2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgdGhpcy5fb3B0aW9uc0NoYW5nZVN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLl9jbGlja1N1YnNjcmlwdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NsaWNrU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NsaWNrU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMuX2toUG9wdXBWaXNpYmlsaXR5UmVxdWVzdFN1YnNjcmlwdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX2toUG9wdXBWaXNpYmlsaXR5UmVxdWVzdFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9raFBvcHVwVmlzaWJpbGl0eVJlcXVlc3RTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5fdmhQb3B1cFZpc2liaWxpdHlSZXF1ZXN0U3Vic2NyaXB0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fdmhQb3B1cFZpc2liaWxpdHlSZXF1ZXN0U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZoUG9wdXBWaXNpYmlsaXR5UmVxdWVzdFN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5faGFuZGxlQ2xpY2tPdXRzaWRlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHVibGljIG1ldGhvZHMgLSBpbXBsZW1lbnRhdGlvbiBvZiBCYXNpY1BvcHVwICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgcGx1Z2luLCB0byBiZSByZWFkeSB0byB1c2UsIGluaXRpYWxpemUgY29tbXVuaWNhdGlvbiB3aXRoIG90aGVyIHBsdWdpbnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGluaXRpYWxpemUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHRoaXMuX29wdGlvbnNHYXRoZXJlciAmJiB0aGlzLl9vcHRpb25zR2F0aGVyZXIgIT0gdGhpcy5vcHRpb25zR2F0aGVyZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLl9vcHRpb25zQ2hhbmdlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnNDaGFuZ2VTdWJzY3JpcHRpb24gPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fb3B0aW9uc0dhdGhlcmVyID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKCF0aGlzLl9vcHRpb25zR2F0aGVyZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLl9vcHRpb25zR2F0aGVyZXIgPSB0aGlzLm9wdGlvbnNHYXRoZXJlcjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnNDaGFuZ2VTdWJzY3JpcHRpb24gPSB0aGlzLl9vcHRpb25zR2F0aGVyZXIuYXZhaWxhYmxlT3B0aW9uc0NoYW5nZS5zdWJzY3JpYmUoKCkgPT4gdGhpcy5sb2FkT3B0aW9ucygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBub3JtYWxTdGF0ZSA9IHRoaXMubmdTZWxlY3RQbHVnaW5zW05PUk1BTF9TVEFURV0gYXMgTm9ybWFsU3RhdGU7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuX25vcm1hbFN0YXRlICYmIHRoaXMuX25vcm1hbFN0YXRlICE9IG5vcm1hbFN0YXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fY2xpY2tTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgdGhpcy5fY2xpY2tTdWJzY3JpcHRpb24gPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fbm9ybWFsU3RhdGUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoIXRoaXMuX25vcm1hbFN0YXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fbm9ybWFsU3RhdGUgPSBub3JtYWxTdGF0ZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2NsaWNrU3Vic2NyaXB0aW9uID0gdGhpcy5fbm9ybWFsU3RhdGUuY2xpY2suc3Vic2NyaWJlKCgpID0+IHRoaXMudG9nZ2xlUG9wdXAoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQga2V5Ym9hcmRIYW5kbGVyID0gdGhpcy5uZ1NlbGVjdFBsdWdpbnNbS0VZQk9BUkRfSEFORExFUl0gYXMgS2V5Ym9hcmRIYW5kbGVyO1xyXG5cclxuICAgICAgICBpZih0aGlzLl9rZXlib2FyZEhhbmRsZXIgJiYgdGhpcy5fa2V5Ym9hcmRIYW5kbGVyICE9IGtleWJvYXJkSGFuZGxlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX2toUG9wdXBWaXNpYmlsaXR5UmVxdWVzdFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9raFBvcHVwVmlzaWJpbGl0eVJlcXVlc3RTdWJzY3JpcHRpb24gPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fa2V5Ym9hcmRIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKCF0aGlzLl9rZXlib2FyZEhhbmRsZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLl9rZXlib2FyZEhhbmRsZXIgPSBrZXlib2FyZEhhbmRsZXI7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9raFBvcHVwVmlzaWJpbGl0eVJlcXVlc3RTdWJzY3JpcHRpb24gPSB0aGlzLl9rZXlib2FyZEhhbmRsZXIucG9wdXBWaXNpYmlsaXR5UmVxdWVzdC5zdWJzY3JpYmUodGhpcy5faGFuZGxlVmlzaWJpbGl0eUNoYW5nZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdmFsdWVIYW5kbGVyID0gdGhpcy5uZ1NlbGVjdFBsdWdpbnNbVkFMVUVfSEFORExFUl0gYXMgVmFsdWVIYW5kbGVyPGFueT47XHJcblxyXG4gICAgICAgIGlmKHRoaXMuX3ZhbHVlSGFuZGxlciAmJiB0aGlzLl92YWx1ZUhhbmRsZXIgIT0gdmFsdWVIYW5kbGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fdmhQb3B1cFZpc2liaWxpdHlSZXF1ZXN0U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZoUG9wdXBWaXNpYmlsaXR5UmVxdWVzdFN1YnNjcmlwdGlvbiA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl92YWx1ZUhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoIXRoaXMuX3ZhbHVlSGFuZGxlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlSGFuZGxlciA9IHZhbHVlSGFuZGxlcjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3ZoUG9wdXBWaXNpYmlsaXR5UmVxdWVzdFN1YnNjcmlwdGlvbiA9IHRoaXMuX3ZhbHVlSGFuZGxlci5wb3B1cFZpc2liaWxpdHlSZXF1ZXN0LnN1YnNjcmliZSh0aGlzLl9oYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubG9hZE9wdGlvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgcGx1Z2luIG9wdGlvbnMsIGFsbCBvcGVyYXRpb25zIHJlcXVpcmVkIHRvIGJlIGRvbmUgd2l0aCBwbHVnaW4gb3B0aW9ucyBhcmUgaGFuZGxlZCBoZXJlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbml0T3B0aW9ucygpXHJcbiAgICB7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeHBsaWNpdGx5IHJ1bnMgaW52YWxpZGF0aW9uIG9mIGNvbnRlbnQgKGNoYW5nZSBkZXRlY3Rpb24pXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbnZhbGlkYXRlVmlzdWFscygpOiB2b2lkXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBwcm90ZWN0ZWQgbWV0aG9kcyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkcyBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBsb2FkT3B0aW9ucygpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RPcHRpb25zID0gdGhpcy5fb3B0aW9uc0dhdGhlcmVyLmF2YWlsYWJsZU9wdGlvbnM7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVG9nZ2xlcyBwb3B1cCB2aXNpYmlsaXR5XHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCB0b2dnbGVQb3B1cCgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zLnZpc2libGUgPSAhdGhpcy5vcHRpb25zLnZpc2libGU7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyBjbGljayBvdXRzaWRlIG9mIHNlbGVjdCBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gZXZlbnQgTW91c2UgZXZlbnQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBfaGFuZGxlQ2xpY2tPdXRzaWRlID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PlxyXG4gICAge1xyXG4gICAgICAgIGlmKHRoaXMuc2VsZWN0RWxlbWVudCAhPSBldmVudC50YXJnZXQgJiYgIWlzRGVzY2VuZGFudCh0aGlzLnNlbGVjdEVsZW1lbnQsIGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudCkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBvcHVwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB2aXNpYmlsaXR5IGNoYW5nZVxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX2hhbmRsZVZpc2liaWxpdHlDaGFuZ2UgPSAodmlzaWJsZTogYm9vbGVhbikgPT5cclxuICAgIHtcclxuICAgICAgICBpZih0aGlzLm9wdGlvbnMudmlzaWJsZSAhPSB2aXNpYmxlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnZpc2libGUgPSB2aXNpYmxlO1xyXG4gICAgICAgICAgICB0aGlzLl9jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSJdfQ==
/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ChangeDetectionStrategy, ChangeDetectorRef, Inject, Optional, ElementRef, EventEmitter } from '@angular/core';
import { extend } from '@asseco/common';
import { NG_SELECT_PLUGIN_INSTANCES } from '../../../components/select/types';
import { NORMAL_STATE_OPTIONS } from '../types';
import { TEXTS_LOCATOR } from '../../textsLocator/types';
import { VALUE_HANDLER } from '../../valueHandler/types';
/**
 * Default options for normal state
 * \@internal
 * @type {?}
 */
var defaultOptions = {
    cssClasses: {
        normalStateElement: 'btn btn-select',
        selectedCarret: 'selected-caret fa fa-caret-down',
        selectedValue: 'selected-value'
    },
    texts: {
        nothingSelected: 'Nothing selected'
    },
    readonly: false
};
/**
 * Component used for rendering basic simple normal state of select
 */
var BasicNormalStateComponent = /** @class */ (function () {
    //######################### constructor #########################
    function BasicNormalStateComponent(ngSelectPlugins, pluginElement, _changeDetector, options) {
        this.ngSelectPlugins = ngSelectPlugins;
        this.pluginElement = pluginElement;
        this._changeDetector = _changeDetector;
        /**
         * Occurs when user clicks on normal state
         */
        this.click = new EventEmitter();
        /**
         * Occurs when normal state gains focus
         */
        this.focus = new EventEmitter();
        /**
         * Occurs when user tries to cancel one of selected values
         */
        this.cancelOption = new EventEmitter();
        //######################### public properties - template bindings #########################
        /**
         * Object containing available texts
         * \@internal
         */
        this.texts = {};
        this._options = extend(true, {}, defaultOptions, options);
    }
    Object.defineProperty(BasicNormalStateComponent.prototype, "options", {
        //######################### public properties - implementation of BasicNormalState #########################
        /**
         * Options for NgSelect plugin
         */
        get: 
        //######################### public properties - implementation of BasicNormalState #########################
        /**
         * Options for NgSelect plugin
         * @return {?}
         */
        function () {
            return this._options;
        },
        set: /**
         * @param {?} options
         * @return {?}
         */
        function (options) {
            this._options = extend(true, this._options, options);
        },
        enumerable: true,
        configurable: true
    });
    //######################### public methods - implementation of OnDestroy #########################
    /**
     * Called when component is destroyed
     */
    //######################### public methods - implementation of OnDestroy #########################
    /**
     * Called when component is destroyed
     * @return {?}
     */
    BasicNormalStateComponent.prototype.ngOnDestroy = 
    //######################### public methods - implementation of OnDestroy #########################
    /**
     * Called when component is destroyed
     * @return {?}
     */
    function () {
        if (this._textsChangedSubscription) {
            this._textsChangedSubscription.unsubscribe();
            this._textsChangedSubscription = null;
        }
    };
    //######################### public methods - implementation of BasicNormalState #########################
    /**
     * Initialize plugin, to be ready to use, initialize communication with other plugins
     */
    //######################### public methods - implementation of BasicNormalState #########################
    /**
     * Initialize plugin, to be ready to use, initialize communication with other plugins
     * @return {?}
     */
    BasicNormalStateComponent.prototype.initialize = 
    //######################### public methods - implementation of BasicNormalState #########################
    /**
     * Initialize plugin, to be ready to use, initialize communication with other plugins
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var textsLocator = (/** @type {?} */ (this.ngSelectPlugins[TEXTS_LOCATOR]));
        if (this._textsLocator && this._textsLocator != textsLocator) {
            this._textsChangedSubscription.unsubscribe();
            this._textsChangedSubscription = null;
            this._textsLocator = null;
        }
        if (!this._textsLocator) {
            this._textsLocator = textsLocator;
            this._textsChangedSubscription = this._textsLocator.textsChange.subscribe((/**
             * @return {?}
             */
            function () { return _this._initTexts(); }));
        }
        /** @type {?} */
        var valueHandler = (/** @type {?} */ (this.ngSelectPlugins[VALUE_HANDLER]));
        if (this.valueHandler && this.valueHandler != valueHandler) {
            this.valueHandler = null;
        }
        if (!this.valueHandler) {
            this.valueHandler = valueHandler;
        }
        this._initTexts();
    };
    /**
     * Initialize plugin options, all operations required to be done with plugin options are handled here
     */
    /**
     * Initialize plugin options, all operations required to be done with plugin options are handled here
     * @return {?}
     */
    BasicNormalStateComponent.prototype.initOptions = /**
     * Initialize plugin options, all operations required to be done with plugin options are handled here
     * @return {?}
     */
    function () {
    };
    /**
     * Explicitly runs invalidation of content (change detection)
     */
    /**
     * Explicitly runs invalidation of content (change detection)
     * @return {?}
     */
    BasicNormalStateComponent.prototype.invalidateVisuals = /**
     * Explicitly runs invalidation of content (change detection)
     * @return {?}
     */
    function () {
        this._changeDetector.detectChanges();
    };
    //######################### protected methods #########################
    /**
     * Initialize texts
     */
    //######################### protected methods #########################
    /**
     * Initialize texts
     * @protected
     * @return {?}
     */
    BasicNormalStateComponent.prototype._initTexts = 
    //######################### protected methods #########################
    /**
     * Initialize texts
     * @protected
     * @return {?}
     */
    function () {
        var _this = this;
        Object.keys(this.options.texts).forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            _this.texts[key] = _this._textsLocator.getText(_this.options.texts[key]);
        }));
        this._changeDetector.detectChanges();
    };
    BasicNormalStateComponent.decorators = [
        { type: Component, args: [{
                    selector: "div.normal-state",
                    template: "<ng-template #defaultLook>{{valueHandler?.selectedOptions | ngSelectValue: texts?.nothingSelected}}</ng-template>\r\n\r\n<button [ngClass]=\"options?.cssClasses?.normalStateElement\" (click)=\"click.emit()\" (focus)=\"focus?.emit()\" [disabled]=\"!!options?.readonly\" type=\"button\" [title]=\"valueHandler?.selectedOptions | ngSelectValue: texts?.nothingSelected\">\r\n    <span [ngClass]=\"options?.cssClasses?.selectedValue\"><ng-container *ngTemplateOutlet=\"templateGatherer?.normalStateTemplate || defaultLook; context: {$implicit: this}\"></ng-container></span>\r\n    <span [ngClass]=\"options?.cssClasses?.selectedCarret\"></span>\r\n</button>",
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: ["button.btn-select\n         {\n             display: flex;\n             width: 100%;\n             padding: 5px 0px 4px 6px;\n             background-color: #ffffff;\n             background-image: none;\n             border: 1px solid #cccccc;\n             border-radius: 4px;\n             box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075) inset;\n             height: 28px;\n             overflow: hidden;\n         }\n\n         button.btn-select:hover\n         {\n             background-color: #F2F2F2;\n         }\n\n         button.btn-select:active\n         {\n             box-shadow: 0 0 5px -1px #888888 inset;\n         }\n       \n         button.btn-select .selected-value\n         {\n             flex: 1;\n             text-align: left;\n             min-width: 0;\n         }\n       \n         button.btn-select .selected-caret\n         {\n             flex: 0 0 20px;\n             align-self: center;\n         }"]
                }] }
    ];
    /** @nocollapse */
    BasicNormalStateComponent.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Inject, args: [NG_SELECT_PLUGIN_INSTANCES,] }, { type: Optional }] },
        { type: ElementRef },
        { type: ChangeDetectorRef },
        { type: undefined, decorators: [{ type: Inject, args: [NORMAL_STATE_OPTIONS,] }, { type: Optional }] }
    ]; };
    return BasicNormalStateComponent;
}());
export { BasicNormalStateComponent };
if (false) {
    /**
     * Texts locator used for handling texts
     * @type {?}
     * @protected
     */
    BasicNormalStateComponent.prototype._textsLocator;
    /**
     * Subscription for changes in texts
     * @type {?}
     * @protected
     */
    BasicNormalStateComponent.prototype._textsChangedSubscription;
    /**
     * Options for NgSelect plugin
     * @type {?}
     * @protected
     */
    BasicNormalStateComponent.prototype._options;
    /**
     * Occurs when user clicks on normal state
     * @type {?}
     */
    BasicNormalStateComponent.prototype.click;
    /**
     * Occurs when normal state gains focus
     * @type {?}
     */
    BasicNormalStateComponent.prototype.focus;
    /**
     * Occurs when user tries to cancel one of selected values
     * @type {?}
     */
    BasicNormalStateComponent.prototype.cancelOption;
    /**
     * Gatherer used for obtaining custom templates
     * @type {?}
     */
    BasicNormalStateComponent.prototype.templateGatherer;
    /**
     * Object containing available texts
     * \@internal
     * @type {?}
     */
    BasicNormalStateComponent.prototype.texts;
    /**
     * Value handler used in NgSelect
     * \@internal
     * @type {?}
     */
    BasicNormalStateComponent.prototype.valueHandler;
    /** @type {?} */
    BasicNormalStateComponent.prototype.ngSelectPlugins;
    /** @type {?} */
    BasicNormalStateComponent.prototype.pluginElement;
    /**
     * @type {?}
     * @protected
     */
    BasicNormalStateComponent.prototype._changeDetector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaWNOb3JtYWxTdGF0ZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvcGx1Z2lucy9ub3JtYWxTdGF0ZS9iYXNpYy9iYXNpY05vcm1hbFN0YXRlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSx1QkFBdUIsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQVksTUFBTSxlQUFlLENBQUM7QUFDM0ksT0FBTyxFQUFDLE1BQU0sRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBTXRDLE9BQU8sRUFBQywwQkFBMEIsRUFBQyxNQUFNLGtDQUFrQyxDQUFDO0FBRTVFLE9BQU8sRUFBQyxvQkFBb0IsRUFBQyxNQUFNLFVBQVUsQ0FBQztBQUU5QyxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sMEJBQTBCLENBQUM7QUFFdkQsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLDBCQUEwQixDQUFDOzs7Ozs7SUFPakQsY0FBYyxHQUNwQjtJQUNJLFVBQVUsRUFDVjtRQUNJLGtCQUFrQixFQUFFLGdCQUFnQjtRQUNwQyxjQUFjLEVBQUUsaUNBQWlDO1FBQ2pELGFBQWEsRUFBRSxnQkFBZ0I7S0FDbEM7SUFDRCxLQUFLLEVBQ0w7UUFDSSxlQUFlLEVBQUUsa0JBQWtCO0tBQ3RDO0lBQ0QsUUFBUSxFQUFFLEtBQUs7Q0FDbEI7Ozs7QUFLRDtJQWdISSxpRUFBaUU7SUFDakUsbUNBQW1FLGVBQXdDLEVBQ3hGLGFBQXlCLEVBQ3RCLGVBQWtDLEVBQ0YsT0FBaUM7UUFIcEIsb0JBQWUsR0FBZixlQUFlLENBQXlCO1FBQ3hGLGtCQUFhLEdBQWIsYUFBYSxDQUFZO1FBQ3RCLG9CQUFlLEdBQWYsZUFBZSxDQUFtQjs7OztRQWxDakQsVUFBSyxHQUF1QixJQUFJLFlBQVksRUFBUSxDQUFDOzs7O1FBS3JELFVB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LElBQUksQ0FBQyxlQUFlLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDekMsQ0FBQzs7Z0JBMU1KLFNBQVMsU0FDVjtvQkFDSSxRQUFRLEVBQUUsa0JBQWtCO29CQUM1Qix5cEJBQThDO29CQUM5QyxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTs2QkFHM0MsczZCQW1DRztpQkFFVjs7OztnREFxRWdCLE1BQU0sU0FBQywwQkFBMEIsY0FBRyxRQUFRO2dCQXZKb0IsVUFBVTtnQkFBL0MsaUJBQWlCO2dEQTBKNUMsTUFBTSxTQUFDLG9CQUFvQixjQUFHLFFBQVE7O0lBdUZ2RCxnQ0FBQztDQUFBLEFBM01ELElBMk1DO1NBOUpZLHlCQUF5Qjs7Ozs7OztJQU9sQyxrREFBc0M7Ozs7OztJQUt0Qyw4REFBa0Q7Ozs7OztJQUtsRCw2Q0FBNEM7Ozs7O0lBbUI1QywwQ0FBNEQ7Ozs7O0lBSzVELDBDQUE0RDs7Ozs7SUFLNUQsaURBQWlHOzs7OztJQUtqRyxxREFBMEM7Ozs7OztJQVExQywwQ0FBb0M7Ozs7OztJQU1wQyxpREFBdUM7O0lBRzNCLG9EQUErRjs7SUFDL0Ysa0RBQWdDOzs7OztJQUNoQyxvREFBNEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBJbmplY3QsIE9wdGlvbmFsLCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIE9uRGVzdHJveX0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7ZXh0ZW5kfSBmcm9tICdAYXNzZWNvL2NvbW1vbic7XHJcbmltcG9ydCB7U3Vic2NyaXB0aW9ufSBmcm9tICdyeGpzJztcclxuXHJcbmltcG9ydCB7QmFzaWNOb3JtYWxTdGF0ZU9wdGlvbnMsIEJhc2ljTm9ybWFsU3RhdGV9IGZyb20gJy4vYmFzaWNOb3JtYWxTdGF0ZS5pbnRlcmZhY2UnO1xyXG5pbXBvcnQge05nU2VsZWN0UGx1Z2luR2VuZXJpYywgVGVtcGxhdGVHYXRoZXJlcn0gZnJvbSAnLi4vLi4vLi4vbWlzYyc7XHJcbmltcG9ydCB7TmdTZWxlY3RQbHVnaW5JbnN0YW5jZXN9IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvc2VsZWN0JztcclxuaW1wb3J0IHtOR19TRUxFQ1RfUExVR0lOX0lOU1RBTkNFU30gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9zZWxlY3QvdHlwZXMnO1xyXG5pbXBvcnQge05vcm1hbFN0YXRlVGV4dHN9IGZyb20gJy4uL25vcm1hbFN0YXRlLmludGVyZmFjZSc7XHJcbmltcG9ydCB7Tk9STUFMX1NUQVRFX09QVElPTlN9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHtUZXh0c0xvY2F0b3J9IGZyb20gJy4uLy4uL3RleHRzTG9jYXRvcic7XHJcbmltcG9ydCB7VEVYVFNfTE9DQVRPUn0gZnJvbSAnLi4vLi4vdGV4dHNMb2NhdG9yL3R5cGVzJztcclxuaW1wb3J0IHtWYWx1ZUhhbmRsZXJ9IGZyb20gJy4uLy4uL3ZhbHVlSGFuZGxlcic7XHJcbmltcG9ydCB7VkFMVUVfSEFORExFUn0gZnJvbSAnLi4vLi4vdmFsdWVIYW5kbGVyL3R5cGVzJztcclxuaW1wb3J0IHtOZ1NlbGVjdE9wdGlvbn0gZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9vcHRpb24nO1xyXG5cclxuLyoqXHJcbiAqIERlZmF1bHQgb3B0aW9ucyBmb3Igbm9ybWFsIHN0YXRlXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgZGVmYXVsdE9wdGlvbnM6IEJhc2ljTm9ybWFsU3RhdGVPcHRpb25zID1cclxue1xyXG4gICAgY3NzQ2xhc3NlczpcclxuICAgIHtcclxuICAgICAgICBub3JtYWxTdGF0ZUVsZW1lbnQ6ICdidG4gYnRuLXNlbGVjdCcsXHJcbiAgICAgICAgc2VsZWN0ZWRDYXJyZXQ6ICdzZWxlY3RlZC1jYXJldCBmYSBmYS1jYXJldC1kb3duJyxcclxuICAgICAgICBzZWxlY3RlZFZhbHVlOiAnc2VsZWN0ZWQtdmFsdWUnXHJcbiAgICB9LFxyXG4gICAgdGV4dHM6XHJcbiAgICB7XHJcbiAgICAgICAgbm90aGluZ1NlbGVjdGVkOiAnTm90aGluZyBzZWxlY3RlZCdcclxuICAgIH0sXHJcbiAgICByZWFkb25seTogZmFsc2VcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDb21wb25lbnQgdXNlZCBmb3IgcmVuZGVyaW5nIGJhc2ljIHNpbXBsZSBub3JtYWwgc3RhdGUgb2Ygc2VsZWN0XHJcbiAqL1xyXG5AQ29tcG9uZW50KFxyXG57XHJcbiAgICBzZWxlY3RvcjogXCJkaXYubm9ybWFsLXN0YXRlXCIsXHJcbiAgICB0ZW1wbGF0ZVVybDogJ2Jhc2ljTm9ybWFsU3RhdGUuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXHJcbiAgICBzdHlsZXM6XHJcbiAgICBbXHJcbiAgICAgICAgYGJ1dHRvbi5idG4tc2VsZWN0XHJcbiAgICAgICAgIHtcclxuICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgIHBhZGRpbmc6IDVweCAwcHggNHB4IDZweDtcclxuICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XHJcbiAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiBub25lO1xyXG4gICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjY2NjYztcclxuICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMDc1KSBpbnNldDtcclxuICAgICAgICAgICAgIGhlaWdodDogMjhweDtcclxuICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGJ1dHRvbi5idG4tc2VsZWN0OmhvdmVyXHJcbiAgICAgICAgIHtcclxuICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGMkYyRjI7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGJ1dHRvbi5idG4tc2VsZWN0OmFjdGl2ZVxyXG4gICAgICAgICB7XHJcbiAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgNXB4IC0xcHggIzg4ODg4OCBpbnNldDtcclxuICAgICAgICAgfVxyXG4gICAgICAgXHJcbiAgICAgICAgIGJ1dHRvbi5idG4tc2VsZWN0IC5zZWxlY3RlZC12YWx1ZVxyXG4gICAgICAgICB7XHJcbiAgICAgICAgICAgICBmbGV4OiAxO1xyXG4gICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcclxuICAgICAgICAgICAgIG1pbi13aWR0aDogMDtcclxuICAgICAgICAgfVxyXG4gICAgICAgXHJcbiAgICAgICAgIGJ1dHRvbi5idG4tc2VsZWN0IC5zZWxlY3RlZC1jYXJldFxyXG4gICAgICAgICB7XHJcbiAgICAgICAgICAgICBmbGV4OiAwIDAgMjBweDtcclxuICAgICAgICAgICAgIGFsaWduLXNlbGY6IGNlbnRlcjtcclxuICAgICAgICAgfWBcclxuICAgIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIEJhc2ljTm9ybWFsU3RhdGVDb21wb25lbnQgaW1wbGVtZW50cyBCYXNpY05vcm1hbFN0YXRlLCBOZ1NlbGVjdFBsdWdpbkdlbmVyaWM8QmFzaWNOb3JtYWxTdGF0ZU9wdGlvbnM+LCBPbkRlc3Ryb3lcclxue1xyXG4gICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIHByb3RlY3RlZCBmaWVsZHMgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGV4dHMgbG9jYXRvciB1c2VkIGZvciBoYW5kbGluZyB0ZXh0c1xyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX3RleHRzTG9jYXRvcjogVGV4dHNMb2NhdG9yO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaXB0aW9uIGZvciBjaGFuZ2VzIGluIHRleHRzXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBfdGV4dHNDaGFuZ2VkU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPcHRpb25zIGZvciBOZ1NlbGVjdCBwbHVnaW5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIF9vcHRpb25zOiBCYXNpY05vcm1hbFN0YXRlT3B0aW9ucztcclxuXHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHVibGljIHByb3BlcnRpZXMgLSBpbXBsZW1lbnRhdGlvbiBvZiBCYXNpY05vcm1hbFN0YXRlICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9wdGlvbnMgZm9yIE5nU2VsZWN0IHBsdWdpblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG9wdGlvbnMoKTogQmFzaWNOb3JtYWxTdGF0ZU9wdGlvbnNcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgb3B0aW9ucyhvcHRpb25zOiBCYXNpY05vcm1hbFN0YXRlT3B0aW9ucylcclxuICAgIHtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gZXh0ZW5kKHRydWUsIHRoaXMuX29wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT2NjdXJzIHdoZW4gdXNlciBjbGlja3Mgb24gbm9ybWFsIHN0YXRlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjbGljazogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogT2NjdXJzIHdoZW4gbm9ybWFsIHN0YXRlIGdhaW5zIGZvY3VzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmb2N1czogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogT2NjdXJzIHdoZW4gdXNlciB0cmllcyB0byBjYW5jZWwgb25lIG9mIHNlbGVjdGVkIHZhbHVlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY2FuY2VsT3B0aW9uOiBFdmVudEVtaXR0ZXI8TmdTZWxlY3RPcHRpb248YW55Pj4gPSBuZXcgRXZlbnRFbWl0dGVyPE5nU2VsZWN0T3B0aW9uPGFueT4+KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHYXRoZXJlciB1c2VkIGZvciBvYnRhaW5pbmcgY3VzdG9tIHRlbXBsYXRlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdGVtcGxhdGVHYXRoZXJlcjogVGVtcGxhdGVHYXRoZXJlcjtcclxuXHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHVibGljIHByb3BlcnRpZXMgLSB0ZW1wbGF0ZSBiaW5kaW5ncyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPYmplY3QgY29udGFpbmluZyBhdmFpbGFibGUgdGV4dHNcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdGV4dHM6IE5vcm1hbFN0YXRlVGV4dHMgPSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFZhbHVlIGhhbmRsZXIgdXNlZCBpbiBOZ1NlbGVjdFxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB2YWx1ZUhhbmRsZXI6IFZhbHVlSGFuZGxlcjxhbnk+O1xyXG5cclxuICAgIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBjb25zdHJ1Y3RvciAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbiAgICBjb25zdHJ1Y3RvcihASW5qZWN0KE5HX1NFTEVDVF9QTFVHSU5fSU5TVEFOQ0VTKSBAT3B0aW9uYWwoKSBwdWJsaWMgbmdTZWxlY3RQbHVnaW5zOiBOZ1NlbGVjdFBsdWdpbkluc3RhbmNlcyxcclxuICAgICAgICAgICAgICAgIHB1YmxpYyBwbHVnaW5FbGVtZW50OiBFbGVtZW50UmVmLFxyXG4gICAgICAgICAgICAgICAgcHJvdGVjdGVkIF9jaGFuZ2VEZXRlY3RvcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICAgICAgICAgICAgICBASW5qZWN0KE5PUk1BTF9TVEFURV9PUFRJT05TKSBAT3B0aW9uYWwoKSBvcHRpb25zPzogQmFzaWNOb3JtYWxTdGF0ZU9wdGlvbnMpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IGV4dGVuZCh0cnVlLCB7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBwdWJsaWMgbWV0aG9kcyAtIGltcGxlbWVudGF0aW9uIG9mIE9uRGVzdHJveSAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHdoZW4gY29tcG9uZW50IGlzIGRlc3Ryb3llZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbmdPbkRlc3Ryb3koKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHRoaXMuX3RleHRzQ2hhbmdlZFN1YnNjcmlwdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHRzQ2hhbmdlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl90ZXh0c0NoYW5nZWRTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgcHVibGljIG1ldGhvZHMgLSBpbXBsZW1lbnRhdGlvbiBvZiBCYXNpY05vcm1hbFN0YXRlICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgcGx1Z2luLCB0byBiZSByZWFkeSB0byB1c2UsIGluaXRpYWxpemUgY29tbXVuaWNhdGlvbiB3aXRoIG90aGVyIHBsdWdpbnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGluaXRpYWxpemUoKVxyXG4gICAge1xyXG4gICAgICAgIGxldCB0ZXh0c0xvY2F0b3IgPSB0aGlzLm5nU2VsZWN0UGx1Z2luc1tURVhUU19MT0NBVE9SXSBhcyBUZXh0c0xvY2F0b3I7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuX3RleHRzTG9jYXRvciAmJiB0aGlzLl90ZXh0c0xvY2F0b3IgIT0gdGV4dHNMb2NhdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5fdGV4dHNDaGFuZ2VkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHRzQ2hhbmdlZFN1YnNjcmlwdGlvbiA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl90ZXh0c0xvY2F0b3IgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoIXRoaXMuX3RleHRzTG9jYXRvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RleHRzTG9jYXRvciA9IHRleHRzTG9jYXRvcjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3RleHRzQ2hhbmdlZFN1YnNjcmlwdGlvbiA9IHRoaXMuX3RleHRzTG9jYXRvci50ZXh0c0NoYW5nZS5zdWJzY3JpYmUoKCkgPT4gdGhpcy5faW5pdFRleHRzKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHZhbHVlSGFuZGxlciA9IHRoaXMubmdTZWxlY3RQbHVnaW5zW1ZBTFVFX0hBTkRMRVJdIGFzIFZhbHVlSGFuZGxlcjxhbnk+O1xyXG5cclxuICAgICAgICBpZih0aGlzLnZhbHVlSGFuZGxlciAmJiB0aGlzLnZhbHVlSGFuZGxlciAhPSB2YWx1ZUhhbmRsZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZighdGhpcy52YWx1ZUhhbmRsZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlSGFuZGxlciA9IHZhbHVlSGFuZGxlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2luaXRUZXh0cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBwbHVnaW4gb3B0aW9ucywgYWxsIG9wZXJhdGlvbnMgcmVxdWlyZWQgdG8gYmUgZG9uZSB3aXRoIHBsdWdpbiBvcHRpb25zIGFyZSBoYW5kbGVkIGhlcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGluaXRPcHRpb25zKClcclxuICAgIHtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4cGxpY2l0bHkgcnVucyBpbnZhbGlkYXRpb24gb2YgY29udGVudCAoY2hhbmdlIGRldGVjdGlvbilcclxuICAgICAqL1xyXG4gICAgcHVibGljIGludmFsaWRhdGVWaXN1YWxzKCk6IHZvaWRcclxuICAgIHtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIHByb3RlY3RlZCBtZXRob2RzICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgdGV4dHNcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIF9pbml0VGV4dHMoKVxyXG4gICAge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMub3B0aW9ucy50ZXh0cykuZm9yRWFjaChrZXkgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dHNba2V5XSA9IHRoaXMuX3RleHRzTG9jYXRvci5nZXRUZXh0KHRoaXMub3B0aW9ucy50ZXh0c1trZXldKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgfVxyXG59Il19